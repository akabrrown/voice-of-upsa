"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/articles/[slug]";
exports.ids = ["pages/api/articles/[slug]"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Farticles%2F%5Bslug%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Carticles%5C%5Bslug%5D.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Farticles%2F%5Bslug%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Carticles%5C%5Bslug%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\articles\\[slug].ts */ \"(api)/./pages/api/articles/[slug].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/articles/[slug]\",\n        pathname: \"/api/articles/[slug]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_articles_slug_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zM19AYmFiZWwrY29yZUA3Ll9jNzk3NWYyZWUyY2VjZmY2MGVlMDU1ZTFmMWYzMDNhOC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFydGljbGVzJTJGJTVCc2x1ZyU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXJ0aWNsZXMlNUMlNUJzbHVnJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9pY2Utb2YtdXBzYS8/MDExNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGFydGljbGVzXFxcXFtzbHVnXS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FydGljbGVzL1tzbHVnXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FydGljbGVzL1tzbHVnXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Farticles%2F%5Bslug%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Carticles%5C%5Bslug%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/auth.ts":
/*!************************************!*\
  !*** ./lib/api/middleware/auth.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticate: () => (/* binding */ authenticate),\n/* harmony export */   checkRole: () => (/* binding */ checkRole),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Simple in-memory rate limiter (for production, use Redis or similar)\nconst rateLimitStore = new Map();\nfunction withRateLimit(maxRequests, windowMs, keyGenerator) {\n    return (req)=>{\n        const key = keyGenerator(req);\n        const now = Date.now();\n        const record = rateLimitStore.get(key);\n        if (!record || now > record.resetTime) {\n            rateLimitStore.set(key, {\n                count: 1,\n                resetTime: now + windowMs\n            });\n            return;\n        }\n        if (record.count >= maxRequests) {\n            const error = new Error(\"Too many requests\");\n            error.statusCode = 429;\n            error.code = \"RATE_LIMIT_EXCEEDED\";\n            throw error;\n        }\n        record.count++;\n    };\n}\nasync function authenticate(req) {\n    const authHeader = req.headers.authorization;\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        const error = new Error(\"No authorization token provided\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    const token = authHeader.replace(\"Bearer \", \"\");\n    // Verify token with Supabase\n    const { data: { user }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n    if (authError || !user) {\n        const error = new Error(\"Invalid or expired token\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    // Get user role from database\n    const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n    if (userError || !userData) {\n        const error = new Error(\"User not found in database\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    return {\n        id: user.id,\n        email: user.email,\n        role: userData.role || \"user\"\n    };\n}\nasync function requireRole(req, allowedRoles) {\n    const user = await authenticate(req);\n    if (!allowedRoles.includes(user.role)) {\n        const error = new Error(\"Insufficient permissions\");\n        error.statusCode = 403;\n        error.code = \"FORBIDDEN\";\n        throw error;\n    }\n    return user;\n}\nfunction checkRole(userRole, allowedRoles) {\n    return allowedRoles.includes(userRole);\n}\nfunction withAuth(handler, options) {\n    return async (req, res)=>{\n        const user = await authenticate(req);\n        if (options?.requiredRole) {\n            const roles = Array.isArray(options.requiredRole) ? options.requiredRole : [\n                options.requiredRole\n            ];\n            if (!roles.includes(user.role)) {\n                const error = new Error(\"Insufficient permissions\");\n                error.statusCode = 403;\n                error.code = \"FORBIDDEN\";\n                throw error;\n            }\n        }\n        return handler(req, res, user);\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJeUMsU0FBU0UsY0FBYztZQUN6QixNQUFNQyxRQUFRQyxNQUFNQyxPQUFPLENBQUNMLFFBQVFFLFlBQVksSUFBSUYsUUFBUUUsWUFBWSxHQUFHO2dCQUFDRixRQUFRRSxZQUFZO2FBQUM7WUFDakcsSUFBSSxDQUFDQyxNQUFNUixRQUFRLENBQUNmLEtBQUtZLElBQUksR0FBRztnQkFDOUIsTUFBTXhCLFFBQVEsSUFBSUMsTUFBTTtnQkFDeEJELE1BQU1FLFVBQVUsR0FBRztnQkFDbkJGLE1BQU1HLElBQUksR0FBRztnQkFDYixNQUFNSDtZQUNSO1FBQ0Y7UUFFQSxPQUFPK0IsUUFBUXhDLEtBQUswQyxLQUFLckI7SUFDM0I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvYXBpL21pZGRsZXdhcmUvYXV0aC50cz8wM2MxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2RhdGFiYXNlLXNlcnZlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxufVxyXG5cclxuLy8gU2ltcGxlIGluLW1lbW9yeSByYXRlIGxpbWl0ZXIgKGZvciBwcm9kdWN0aW9uLCB1c2UgUmVkaXMgb3Igc2ltaWxhcilcclxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9PigpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhSYXRlTGltaXQoXHJcbiAgbWF4UmVxdWVzdHM6IG51bWJlcixcclxuICB3aW5kb3dNczogbnVtYmVyLFxyXG4gIGtleUdlbmVyYXRvcjogKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHN0cmluZ1xyXG4pIHtcclxuICByZXR1cm4gKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHtcclxuICAgIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvcihyZXEpO1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpO1xyXG5cclxuICAgIGlmICghcmVjb3JkIHx8IG5vdyA+IHJlY29yZC5yZXNldFRpbWUpIHtcclxuICAgICAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZWNvcmQuY291bnQgPj0gbWF4UmVxdWVzdHMpIHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1RvbyBtYW55IHJlcXVlc3RzJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQyOTtcclxuICAgICAgZXJyb3IuY29kZSA9ICdSQVRFX0xJTUlUX0VYQ0VFREVEJztcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcmVjb3JkLmNvdW50Kys7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShyZXE6IE5leHRBcGlSZXF1ZXN0KTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG5cclxuICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm8gYXV0aG9yaXphdGlvbiB0b2tlbiBwcm92aWRlZCcpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAxO1xyXG4gICAgZXJyb3IuY29kZSA9ICdVTkFVVEhPUklaRUQnO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuXHJcbiAgLy8gVmVyaWZ5IHRva2VuIHdpdGggU3VwYWJhc2VcclxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmF1dGguZ2V0VXNlcih0b2tlbik7XHJcblxyXG4gIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHVzZXIgcm9sZSBmcm9tIGRhdGFiYXNlXHJcbiAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgLmZyb20oJ3VzZXJzJylcclxuICAgIC5zZWxlY3QoJ3JvbGUnKVxyXG4gICAgLmVxKCdpZCcsIHVzZXIuaWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmICh1c2VyRXJyb3IgfHwgIXVzZXJEYXRhKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2UnKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8ICd1c2VyJ1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlUm9sZShyZXE6IE5leHRBcGlSZXF1ZXN0LCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuXHJcbiAgaWYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgZXJyb3IuY29kZSA9ICdGT1JCSURERU4nO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUm9sZSh1c2VyUm9sZTogc3RyaW5nLCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIGFsbG93ZWRSb2xlcy5pbmNsdWRlcyh1c2VyUm9sZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhlbnRpY2F0ZWRVc2VyKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCxcclxuICBvcHRpb25zPzogeyByZXF1aXJlZFJvbGU/OiBzdHJpbmcgfCBzdHJpbmdbXSB9XHJcbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKG9wdGlvbnM/LnJlcXVpcmVkUm9sZSkge1xyXG4gICAgICBjb25zdCByb2xlcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5yZXF1aXJlZFJvbGUpID8gb3B0aW9ucy5yZXF1aXJlZFJvbGUgOiBbb3B0aW9ucy5yZXF1aXJlZFJvbGVdO1xyXG4gICAgICBpZiAoIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgICAgIGVycm9yLmNvZGUgPSAnRk9SQklEREVOJztcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJ3aXRoUmF0ZUxpbWl0IiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsImtleUdlbmVyYXRvciIsInJlcSIsImtleSIsIm5vdyIsIkRhdGUiLCJyZWNvcmQiLCJnZXQiLCJyZXNldFRpbWUiLCJzZXQiLCJjb3VudCIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiY29kZSIsImF1dGhlbnRpY2F0ZSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInJlcGxhY2UiLCJkYXRhIiwidXNlciIsImF1dGhFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwidXNlckRhdGEiLCJ1c2VyRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsImVtYWlsIiwicm9sZSIsInJlcXVpcmVSb2xlIiwiYWxsb3dlZFJvbGVzIiwiaW5jbHVkZXMiLCJjaGVja1JvbGUiLCJ1c2VyUm9sZSIsIndpdGhBdXRoIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJyZXMiLCJyZXF1aXJlZFJvbGUiLCJyb2xlcyIsIkFycmF5IiwiaXNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/error-handler.ts":
/*!*********************************************!*\
  !*** ./lib/api/middleware/error-handler.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nclass AuthenticationError extends Error {\n    constructor(message = \"Authentication required\"){\n        super(message);\n        this.statusCode = 401;\n        this.code = \"AUTHENTICATION_ERROR\";\n        this.name = \"AuthenticationError\";\n    }\n}\nclass ValidationError extends Error {\n    constructor(message = \"Invalid input data\"){\n        super(message);\n        this.statusCode = 400;\n        this.code = \"VALIDATION_ERROR\";\n        this.name = \"ValidationError\";\n    }\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            console.error(\"API Error:\", error);\n            const statusCode = error && typeof error === \"object\" && \"statusCode\" in error ? error.statusCode : 500;\n            const message = error instanceof Error ? error.message : error && typeof error === \"object\" && \"message\" in error ? error.message : \"Internal Server Error\";\n            const code = error && typeof error === \"object\" && \"code\" in error ? error.code : \"INTERNAL_SERVER_ERROR\";\n            // Ensure we haven't already sent a response\n            if (!res.writableEnded) {\n                const response = {\n                    success: false,\n                    error: {\n                        code,\n                        message,\n                        details:  true && error instanceof Error ? error.stack : undefined\n                    },\n                    timestamp: new Date().toISOString()\n                };\n                res.status(statusCode).json(response);\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpL21pZGRsZXdhcmUvZXJyb3ItaGFuZGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFZTyxNQUFNQSw0QkFBNEJDO0lBSXZDQyxZQUFZQyxVQUFrQix5QkFBeUIsQ0FBRTtRQUN2RCxLQUFLLENBQUNBO2FBSlJDLGFBQWE7YUFDYkMsT0FBTztRQUlMLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1DLHdCQUF3Qk47SUFJbkNDLFlBQVlDLFVBQWtCLG9CQUFvQixDQUFFO1FBQ2xELEtBQUssQ0FBQ0E7YUFKUkMsYUFBYTthQUNiQyxPQUFPO1FBSUwsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sU0FBU0UsaUJBQWlCQyxPQUF1QjtJQUN0RCxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsTUFBTUYsUUFBUUMsS0FBS0M7UUFDckIsRUFBRSxPQUFPQyxPQUFnQjtZQUN2QkMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1lBRTVCLE1BQU1SLGFBQWFRLFNBQVMsT0FBT0EsVUFBVSxZQUFZLGdCQUFnQkEsUUFBU0EsTUFBTVIsVUFBVSxHQUFjO1lBQ2hILE1BQU1ELFVBQVVTLGlCQUFpQlgsUUFBUVcsTUFBTVQsT0FBTyxHQUNuRFMsU0FBUyxPQUFPQSxVQUFVLFlBQVksYUFBYUEsUUFBUSxNQUErQlQsT0FBTyxHQUFHO1lBQ3ZHLE1BQU1FLE9BQU9PLFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLFFBQVNBLE1BQU1QLElBQUksR0FBYztZQUU5Riw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDTSxJQUFJRyxhQUFhLEVBQUU7Z0JBQ3RCLE1BQU1DLFdBQTZCO29CQUNqQ0MsU0FBUztvQkFDVEosT0FBTzt3QkFDTFA7d0JBQ0FGO3dCQUNBYyxTQUFTQyxLQUF5QixJQUFpQk4saUJBQWlCWCxRQUFRVyxNQUFNTyxLQUFLLEdBQUdDO29CQUM1RjtvQkFDQUMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztnQkFFQVosSUFBSWEsTUFBTSxDQUFDcEIsWUFBWXFCLElBQUksQ0FBQ1Y7WUFDOUI7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vbGliL2FwaS9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXIudHM/Njg4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlFcnJvclJlc3BvbnNlIHtcclxuICBzdWNjZXNzOiBmYWxzZTtcclxuICBlcnJvcjoge1xyXG4gICAgY29kZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZGV0YWlscz86IHVua25vd247XHJcbiAgfTtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMTtcclxuICBjb2RlID0gJ0FVVEhFTlRJQ0FUSU9OX0VSUk9SJztcclxuICBcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdBdXRoZW50aWNhdGlvbkVycm9yJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMDtcclxuICBjb2RlID0gJ1ZBTElEQVRJT05fRVJST1InO1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnZhbGlkIGlucHV0IGRhdGEnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdWYWxpZGF0aW9uRXJyb3InO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsZXIoaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzQ29kZScgaW4gZXJyb3IgPyAoZXJyb3Iuc3RhdHVzQ29kZSBhcyBudW1iZXIpIDogNTAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcclxuICAgICAgICAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IgPyAoZXJyb3IgYXMgeyBtZXNzYWdlOiBzdHJpbmcgfSkubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcclxuICAgICAgY29uc3QgY29kZSA9IGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ2NvZGUnIGluIGVycm9yID8gKGVycm9yLmNvZGUgYXMgc3RyaW5nKSA6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InO1xyXG5cclxuICAgICAgLy8gRW5zdXJlIHdlIGhhdmVuJ3QgYWxyZWFkeSBzZW50IGEgcmVzcG9uc2VcclxuICAgICAgaWYgKCFyZXMud3JpdGFibGVFbmRlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlFcnJvclJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgICBjb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwibmFtZSIsIlZhbGlkYXRpb25FcnJvciIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJjb25zb2xlIiwid3JpdGFibGVFbmRlZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJwcm9jZXNzIiwic3RhY2siLCJ1bmRlZmluZWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/error-handler.ts\n");

/***/ }),

/***/ "(api)/./lib/database-server.ts":
/*!********************************!*\
  !*** ./lib/database-server.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = \"https://hewrjnconmykfzggwhzg.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n}\nif (!supabaseServiceKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable\");\n}\n// Create a Supabase client with the service role key for admin operations\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRWhFLElBQUksQ0FBQ0wsYUFBYTtJQUNoQixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJLENBQUNGLG9CQUFvQjtJQUN2QixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSwwRUFBMEU7QUFDbkUsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FBQ0MsYUFBYUksb0JBQW9CO0lBQ3pFSSxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzP2NkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxuaWYgKCFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgd2l0aCB0aGUgc2VydmljZSByb2xlIGtleSBmb3IgYWRtaW4gb3BlcmF0aW9uc1xyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcclxuICB9XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database-server.ts\n");

/***/ }),

/***/ "(api)/./lib/watermark.ts":
/*!**************************!*\
  !*** ./lib/watermark.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyWatermark: () => (/* binding */ applyWatermark),\n/* harmony export */   applyWatermarkToBuffer: () => (/* binding */ applyWatermarkToBuffer)\n/* harmony export */ });\n// Temporary fallback until Sharp can be installed\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet sharp;\ntry {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires, @typescript-eslint/no-require-imports\n    sharp = __webpack_require__(/*! sharp */ \"sharp\");\n} catch  {\n    console.warn(\"Sharp not available, watermark functionality disabled\");\n    // Create a mock sharp function that does nothing\n    sharp = ()=>({\n            metadata: ()=>Promise.resolve({\n                    width: 800,\n                    height: 600\n                }),\n            composite: ()=>({\n                    metadata: ()=>Promise.resolve({\n                            width: 800,\n                            height: 600\n                        }),\n                    composite: ()=>({\n                            metadata: ()=>Promise.resolve({\n                                    width: 800,\n                                    height: 600\n                                }),\n                            composite: ()=>({\n                                    metadata: ()=>Promise.resolve({\n                                            width: 800,\n                                            height: 600\n                                        }),\n                                    composite: ()=>({\n                                            metadata: ()=>Promise.resolve({\n                                                    width: 800,\n                                                    height: 600\n                                                }),\n                                            composite: ()=>({\n                                                    metadata: ()=>Promise.resolve({\n                                                            width: 800,\n                                                            height: 600\n                                                        }),\n                                                    composite: ()=>({\n                                                            metadata: ()=>Promise.resolve({\n                                                                    width: 800,\n                                                                    height: 600\n                                                                }),\n                                                            composite: ()=>({\n                                                                    metadata: ()=>Promise.resolve({\n                                                                            width: 800,\n                                                                            height: 600\n                                                                        }),\n                                                                    composite: ()=>({\n                                                                            metadata: ()=>Promise.resolve({\n                                                                                    width: 800,\n                                                                                    height: 600\n                                                                                }),\n                                                                            composite: ()=>({\n                                                                                    metadata: ()=>Promise.resolve({\n                                                                                            width: 800,\n                                                                                            height: 600\n                                                                                        }),\n                                                                                    composite: ()=>({\n                                                                                            metadata: ()=>Promise.resolve({\n                                                                                                    width: 800,\n                                                                                                    height: 600\n                                                                                                }),\n                                                                                            composite: ()=>({\n                                                                                                    metadata: ()=>Promise.resolve({\n                                                                                                            width: 800,\n                                                                                                            height: 600\n                                                                                                        }),\n                                                                                                    composite: ()=>({\n                                                                                                            toFile: ()=>Promise.resolve(\"mock-output\"),\n                                                                                                            toBuffer: ()=>Promise.resolve(Buffer.from(\"mock-image\"))\n                                                                                                        })\n                                                                                                })\n                                                                                        })\n                                                                                })\n                                                                        })\n                                                                })\n                                                        })\n                                                })\n                                        })\n                                })\n                        })\n                })\n        });\n}\n/**\r\n * Apply watermark to an image\r\n * @param imagePath Path to the original image\r\n * @param outputPath Path to save the watermarked image\r\n * @param options Watermark configuration\r\n */ async function applyWatermark(imagePath, outputPath, options = {}) {\n    const { text = \"VOU - Voice of UPSA\", position = \"bottom-right\", size = 48, color = \"rgba(255, 255, 255, 0.7)\" } = options;\n    try {\n        // Get image metadata\n        const metadata = await sharp(imagePath).metadata();\n        const { width, height } = metadata;\n        if (!width || !height) {\n            throw new Error(\"Unable to determine image dimensions\");\n        }\n        // Create watermark text SVG\n        const watermarkSvg = `\r\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <defs>\r\n          <filter id=\"shadow\">\r\n            <feDropShadow dx=\"2\" dy=\"2\" stdDeviation=\"2\" flood-opacity=\"0.5\"/>\r\n          </filter>\r\n        </defs>\r\n        <text \r\n          x=\"${getPositionX(position, width)}\" \r\n          y=\"${getPositionY(position, height)}\" \r\n          font-family=\"Arial, sans-serif\" \r\n          font-size=\"${size}\" \r\n          font-weight=\"bold\"\r\n          fill=\"${color}\"\r\n          text-anchor=\"${getTextAnchor(position)}\"\r\n          filter=\"url(#shadow)\"\r\n        >\r\n          ${text}\r\n        </text>\r\n      </svg>\r\n    `;\n        // Apply watermark\n        await sharp(imagePath).composite([\n            {\n                input: Buffer.from(watermarkSvg),\n                gravity: \"center\"\n            }\n        ]).toFile(outputPath);\n        return outputPath;\n    } catch (error) {\n        console.error(\"Error applying watermark:\", error);\n        throw new Error(\"Failed to apply watermark\");\n    }\n}\n/**\r\n * Apply watermark to image buffer\r\n * @param imageBuffer Image buffer\r\n * @param options Watermark configuration\r\n */ async function applyWatermarkToBuffer(imageBuffer, options = {}) {\n    const { text = \"VOU - Voice of UPSA\", position = \"bottom-right\", size = 48, color = \"rgba(255, 255, 255, 0.7)\" } = options;\n    try {\n        // Get image metadata\n        const metadata = await sharp(imageBuffer).metadata();\n        const { width, height } = metadata;\n        if (!width || !height) {\n            throw new Error(\"Unable to determine image dimensions\");\n        }\n        // Create watermark text SVG\n        const watermarkSvg = `\r\n      <svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <defs>\r\n          <filter id=\"shadow\">\r\n            <feDropShadow dx=\"2\" dy=\"2\" stdDeviation=\"2\" flood-opacity=\"0.5\"/>\r\n          </filter>\r\n        </defs>\r\n        <text \r\n          x=\"${getPositionX(position, width)}\" \r\n          y=\"${getPositionY(position, height)}\" \r\n          font-family=\"Arial, sans-serif\" \r\n          font-size=\"${size}\" \r\n          font-weight=\"bold\"\r\n          fill=\"${color}\"\r\n          text-anchor=\"${getTextAnchor(position)}\"\r\n          filter=\"url(#shadow)\"\r\n        >\r\n          ${text}\r\n        </text>\r\n      </svg>\r\n    `;\n        // Apply watermark and return buffer\n        return await sharp(imageBuffer).composite([\n            {\n                input: Buffer.from(watermarkSvg),\n                gravity: \"center\"\n            }\n        ]).toBuffer();\n    } catch (error) {\n        console.error(\"Error applying watermark to buffer:\", error);\n        throw new Error(\"Failed to apply watermark to buffer\");\n    }\n}\nfunction getPositionX(position, width) {\n    const padding = 20;\n    switch(position){\n        case \"top-left\":\n        case \"bottom-left\":\n            return padding;\n        case \"top-right\":\n        case \"bottom-right\":\n            return width - padding;\n        case \"center\":\n            return width / 2;\n        default:\n            return width - padding;\n    }\n}\nfunction getPositionY(position, height) {\n    const padding = 40;\n    switch(position){\n        case \"top-left\":\n        case \"top-right\":\n            return padding;\n        case \"bottom-left\":\n        case \"bottom-right\":\n            return height - padding;\n        case \"center\":\n            return height / 2;\n        default:\n            return height - padding;\n    }\n}\nfunction getTextAnchor(position) {\n    switch(position){\n        case \"top-left\":\n        case \"bottom-left\":\n            return \"start\";\n        case \"top-right\":\n        case \"bottom-right\":\n            return \"end\";\n        case \"center\":\n            return \"middle\";\n        default:\n            return \"end\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7UUFFRCxvQ0FBb0M7UUFDcEMsT0FBTyxNQUFNbEIsTUFBTStCLGFBQ2hCdEIsU0FBUyxDQUFDO1lBQUM7Z0JBQ1ZrQixPQUFPZixPQUFPQyxJQUFJLENBQUNVO2dCQUNuQkssU0FBUztZQUNYO1NBQUUsRUFDRGpCLFFBQVE7SUFFYixFQUFFLE9BQU9rQixPQUFPO1FBQ2QzQixRQUFRMkIsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsTUFBTSxJQUFJUCxNQUFNO0lBQ2xCO0FBQ0Y7QUFFQSxTQUFTRSxhQUFhTCxRQUFnQixFQUFFWixLQUFhO0lBQ25ELE1BQU15QixVQUFVO0lBQ2hCLE9BQVFiO1FBQ04sS0FBSztRQUNMLEtBQUs7WUFDSCxPQUFPYTtRQUNULEtBQUs7UUFDTCxLQUFLO1lBQ0gsT0FBT3pCLFFBQVF5QjtRQUNqQixLQUFLO1lBQ0gsT0FBT3pCLFFBQVE7UUFDakI7WUFDRSxPQUFPQSxRQUFReUI7SUFDbkI7QUFDRjtBQUVBLFNBQVNQLGFBQWFOLFFBQWdCLEVBQUVYLE1BQWM7SUFDcEQsTUFBTXdCLFVBQVU7SUFDaEIsT0FBUWI7UUFDTixLQUFLO1FBQ0wsS0FBSztZQUNILE9BQU9hO1FBQ1QsS0FBSztRQUNMLEtBQUs7WUFDSCxPQUFPeEIsU0FBU3dCO1FBQ2xCLEtBQUs7WUFDSCxPQUFPeEIsU0FBUztRQUNsQjtZQUNFLE9BQU9BLFNBQVN3QjtJQUNwQjtBQUNGO0FBRUEsU0FBU04sY0FBY1AsUUFBZ0I7SUFDckMsT0FBUUE7UUFDTixLQUFLO1FBQ0wsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1FBQ0wsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNUO1lBQ0UsT0FBTztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vbGliL3dhdGVybWFyay50cz9kY2FlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRlbXBvcmFyeSBmYWxsYmFjayB1bnRpbCBTaGFycCBjYW4gYmUgaW5zdGFsbGVkXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmxldCBzaGFycDogYW55O1xyXG50cnkge1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzXHJcbiAgc2hhcnAgPSByZXF1aXJlKCdzaGFycCcpO1xyXG59IGNhdGNoIHtcclxuICBjb25zb2xlLndhcm4oJ1NoYXJwIG5vdCBhdmFpbGFibGUsIHdhdGVybWFyayBmdW5jdGlvbmFsaXR5IGRpc2FibGVkJyk7XHJcbiAgLy8gQ3JlYXRlIGEgbW9jayBzaGFycCBmdW5jdGlvbiB0aGF0IGRvZXMgbm90aGluZ1xyXG4gIHNoYXJwID0gKCkgPT4gKHtcclxuICAgIG1ldGFkYXRhOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KSxcclxuICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICBjb21wb3NpdGU6ICgpID0+ICh7XHJcbiAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgIG1ldGFkYXRhOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KSxcclxuICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICBjb21wb3NpdGU6ICgpID0+ICh7XHJcbiAgICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KSxcclxuICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICAgICAgICBjb21wb3NpdGU6ICgpID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb3NpdGU6ICgpID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHdpZHRoOiA4MDAsIGhlaWdodDogNjAwIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvc2l0ZTogKCkgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvRmlsZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCdtb2NrLW91dHB1dCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9CdWZmZXI6ICgpID0+IFByb21pc2UucmVzb2x2ZShCdWZmZXIuZnJvbSgnbW9jay1pbWFnZScpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgV2F0ZXJtYXJrT3B0aW9ucyB7XHJcbiAgdGV4dD86IHN0cmluZztcclxuICBpbWFnZVBhdGg/OiBzdHJpbmc7XHJcbiAgcG9zaXRpb24/OiAndG9wLWxlZnQnIHwgJ3RvcC1yaWdodCcgfCAnYm90dG9tLWxlZnQnIHwgJ2JvdHRvbS1yaWdodCcgfCAnY2VudGVyJztcclxuICBvcGFjaXR5PzogbnVtYmVyO1xyXG4gIHNpemU/OiBudW1iZXI7XHJcbiAgY29sb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBseSB3YXRlcm1hcmsgdG8gYW4gaW1hZ2VcclxuICogQHBhcmFtIGltYWdlUGF0aCBQYXRoIHRvIHRoZSBvcmlnaW5hbCBpbWFnZVxyXG4gKiBAcGFyYW0gb3V0cHV0UGF0aCBQYXRoIHRvIHNhdmUgdGhlIHdhdGVybWFya2VkIGltYWdlXHJcbiAqIEBwYXJhbSBvcHRpb25zIFdhdGVybWFyayBjb25maWd1cmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlXYXRlcm1hcmsoXHJcbiAgaW1hZ2VQYXRoOiBzdHJpbmcsXHJcbiAgb3V0cHV0UGF0aDogc3RyaW5nLFxyXG4gIG9wdGlvbnM6IFdhdGVybWFya09wdGlvbnMgPSB7fVxyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IHtcclxuICAgIHRleHQgPSAnVk9VIC0gVm9pY2Ugb2YgVVBTQScsXHJcbiAgICBwb3NpdGlvbiA9ICdib3R0b20tcmlnaHQnLFxyXG4gICAgc2l6ZSA9IDQ4LFxyXG4gICAgY29sb3IgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJ1xyXG4gIH0gPSBvcHRpb25zO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gR2V0IGltYWdlIG1ldGFkYXRhXHJcbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHNoYXJwKGltYWdlUGF0aCkubWV0YWRhdGEoKTtcclxuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gbWV0YWRhdGE7XHJcblxyXG4gICAgaWYgKCF3aWR0aCB8fCAhaGVpZ2h0KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGRldGVybWluZSBpbWFnZSBkaW1lbnNpb25zJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHdhdGVybWFyayB0ZXh0IFNWR1xyXG4gICAgY29uc3Qgd2F0ZXJtYXJrU3ZnID0gYFxyXG4gICAgICA8c3ZnIHdpZHRoPVwiJHt3aWR0aH1cIiBoZWlnaHQ9XCIke2hlaWdodH1cIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XHJcbiAgICAgICAgPGRlZnM+XHJcbiAgICAgICAgICA8ZmlsdGVyIGlkPVwic2hhZG93XCI+XHJcbiAgICAgICAgICAgIDxmZURyb3BTaGFkb3cgZHg9XCIyXCIgZHk9XCIyXCIgc3RkRGV2aWF0aW9uPVwiMlwiIGZsb29kLW9wYWNpdHk9XCIwLjVcIi8+XHJcbiAgICAgICAgICA8L2ZpbHRlcj5cclxuICAgICAgICA8L2RlZnM+XHJcbiAgICAgICAgPHRleHQgXHJcbiAgICAgICAgICB4PVwiJHtnZXRQb3NpdGlvblgocG9zaXRpb24sIHdpZHRoKX1cIiBcclxuICAgICAgICAgIHk9XCIke2dldFBvc2l0aW9uWShwb3NpdGlvbiwgaGVpZ2h0KX1cIiBcclxuICAgICAgICAgIGZvbnQtZmFtaWx5PVwiQXJpYWwsIHNhbnMtc2VyaWZcIiBcclxuICAgICAgICAgIGZvbnQtc2l6ZT1cIiR7c2l6ZX1cIiBcclxuICAgICAgICAgIGZvbnQtd2VpZ2h0PVwiYm9sZFwiXHJcbiAgICAgICAgICBmaWxsPVwiJHtjb2xvcn1cIlxyXG4gICAgICAgICAgdGV4dC1hbmNob3I9XCIke2dldFRleHRBbmNob3IocG9zaXRpb24pfVwiXHJcbiAgICAgICAgICBmaWx0ZXI9XCJ1cmwoI3NoYWRvdylcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgICR7dGV4dH1cclxuICAgICAgICA8L3RleHQ+XHJcbiAgICAgIDwvc3ZnPlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBBcHBseSB3YXRlcm1hcmtcclxuICAgIGF3YWl0IHNoYXJwKGltYWdlUGF0aClcclxuICAgICAgLmNvbXBvc2l0ZShbe1xyXG4gICAgICAgIGlucHV0OiBCdWZmZXIuZnJvbSh3YXRlcm1hcmtTdmcpLFxyXG4gICAgICAgIGdyYXZpdHk6ICdjZW50ZXInXHJcbiAgICAgIH1dKVxyXG4gICAgICAudG9GaWxlKG91dHB1dFBhdGgpO1xyXG5cclxuICAgIHJldHVybiBvdXRwdXRQYXRoO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhcHBseWluZyB3YXRlcm1hcms6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYXBwbHkgd2F0ZXJtYXJrJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQXBwbHkgd2F0ZXJtYXJrIHRvIGltYWdlIGJ1ZmZlclxyXG4gKiBAcGFyYW0gaW1hZ2VCdWZmZXIgSW1hZ2UgYnVmZmVyXHJcbiAqIEBwYXJhbSBvcHRpb25zIFdhdGVybWFyayBjb25maWd1cmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwbHlXYXRlcm1hcmtUb0J1ZmZlcihcclxuICBpbWFnZUJ1ZmZlcjogQnVmZmVyLFxyXG4gIG9wdGlvbnM6IFdhdGVybWFya09wdGlvbnMgPSB7fVxyXG4pOiBQcm9taXNlPEJ1ZmZlcj4ge1xyXG4gIGNvbnN0IHtcclxuICAgIHRleHQgPSAnVk9VIC0gVm9pY2Ugb2YgVVBTQScsXHJcbiAgICBwb3NpdGlvbiA9ICdib3R0b20tcmlnaHQnLFxyXG4gICAgc2l6ZSA9IDQ4LFxyXG4gICAgY29sb3IgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjcpJ1xyXG4gIH0gPSBvcHRpb25zO1xyXG5cclxuICB0cnkge1xyXG4gICAgLy8gR2V0IGltYWdlIG1ldGFkYXRhXHJcbiAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHNoYXJwKGltYWdlQnVmZmVyKS5tZXRhZGF0YSgpO1xyXG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBtZXRhZGF0YTtcclxuXHJcbiAgICBpZiAoIXdpZHRoIHx8ICFoZWlnaHQpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZGV0ZXJtaW5lIGltYWdlIGRpbWVuc2lvbnMnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgd2F0ZXJtYXJrIHRleHQgU1ZHXHJcbiAgICBjb25zdCB3YXRlcm1hcmtTdmcgPSBgXHJcbiAgICAgIDxzdmcgd2lkdGg9XCIke3dpZHRofVwiIGhlaWdodD1cIiR7aGVpZ2h0fVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICA8ZGVmcz5cclxuICAgICAgICAgIDxmaWx0ZXIgaWQ9XCJzaGFkb3dcIj5cclxuICAgICAgICAgICAgPGZlRHJvcFNoYWRvdyBkeD1cIjJcIiBkeT1cIjJcIiBzdGREZXZpYXRpb249XCIyXCIgZmxvb2Qtb3BhY2l0eT1cIjAuNVwiLz5cclxuICAgICAgICAgIDwvZmlsdGVyPlxyXG4gICAgICAgIDwvZGVmcz5cclxuICAgICAgICA8dGV4dCBcclxuICAgICAgICAgIHg9XCIke2dldFBvc2l0aW9uWChwb3NpdGlvbiwgd2lkdGgpfVwiIFxyXG4gICAgICAgICAgeT1cIiR7Z2V0UG9zaXRpb25ZKHBvc2l0aW9uLCBoZWlnaHQpfVwiIFxyXG4gICAgICAgICAgZm9udC1mYW1pbHk9XCJBcmlhbCwgc2Fucy1zZXJpZlwiIFxyXG4gICAgICAgICAgZm9udC1zaXplPVwiJHtzaXplfVwiIFxyXG4gICAgICAgICAgZm9udC13ZWlnaHQ9XCJib2xkXCJcclxuICAgICAgICAgIGZpbGw9XCIke2NvbG9yfVwiXHJcbiAgICAgICAgICB0ZXh0LWFuY2hvcj1cIiR7Z2V0VGV4dEFuY2hvcihwb3NpdGlvbil9XCJcclxuICAgICAgICAgIGZpbHRlcj1cInVybCgjc2hhZG93KVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgJHt0ZXh0fVxyXG4gICAgICAgIDwvdGV4dD5cclxuICAgICAgPC9zdmc+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIEFwcGx5IHdhdGVybWFyayBhbmQgcmV0dXJuIGJ1ZmZlclxyXG4gICAgcmV0dXJuIGF3YWl0IHNoYXJwKGltYWdlQnVmZmVyKVxyXG4gICAgICAuY29tcG9zaXRlKFt7XHJcbiAgICAgICAgaW5wdXQ6IEJ1ZmZlci5mcm9tKHdhdGVybWFya1N2ZyksXHJcbiAgICAgICAgZ3Jhdml0eTogJ2NlbnRlcidcclxuICAgICAgfV0pXHJcbiAgICAgIC50b0J1ZmZlcigpO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYXBwbHlpbmcgd2F0ZXJtYXJrIHRvIGJ1ZmZlcjonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhcHBseSB3YXRlcm1hcmsgdG8gYnVmZmVyJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQb3NpdGlvblgocG9zaXRpb246IHN0cmluZywgd2lkdGg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgY29uc3QgcGFkZGluZyA9IDIwO1xyXG4gIHN3aXRjaCAocG9zaXRpb24pIHtcclxuICAgIGNhc2UgJ3RvcC1sZWZ0JzpcclxuICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgcmV0dXJuIHBhZGRpbmc7XHJcbiAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgcmV0dXJuIHdpZHRoIC0gcGFkZGluZztcclxuICAgIGNhc2UgJ2NlbnRlcic6XHJcbiAgICAgIHJldHVybiB3aWR0aCAvIDI7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gd2lkdGggLSBwYWRkaW5nO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UG9zaXRpb25ZKHBvc2l0aW9uOiBzdHJpbmcsIGhlaWdodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICBjb25zdCBwYWRkaW5nID0gNDA7XHJcbiAgc3dpdGNoIChwb3NpdGlvbikge1xyXG4gICAgY2FzZSAndG9wLWxlZnQnOlxyXG4gICAgY2FzZSAndG9wLXJpZ2h0JzpcclxuICAgICAgcmV0dXJuIHBhZGRpbmc7XHJcbiAgICBjYXNlICdib3R0b20tbGVmdCc6XHJcbiAgICBjYXNlICdib3R0b20tcmlnaHQnOlxyXG4gICAgICByZXR1cm4gaGVpZ2h0IC0gcGFkZGluZztcclxuICAgIGNhc2UgJ2NlbnRlcic6XHJcbiAgICAgIHJldHVybiBoZWlnaHQgLyAyO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIGhlaWdodCAtIHBhZGRpbmc7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUZXh0QW5jaG9yKHBvc2l0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHN3aXRjaCAocG9zaXRpb24pIHtcclxuICAgIGNhc2UgJ3RvcC1sZWZ0JzpcclxuICAgIGNhc2UgJ2JvdHRvbS1sZWZ0JzpcclxuICAgICAgcmV0dXJuICdzdGFydCc7XHJcbiAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgcmV0dXJuICdlbmQnO1xyXG4gICAgY2FzZSAnY2VudGVyJzpcclxuICAgICAgcmV0dXJuICdtaWRkbGUnO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuICdlbmQnO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsic2hhcnAiLCJyZXF1aXJlIiwiY29uc29sZSIsIndhcm4iLCJtZXRhZGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwid2lkdGgiLCJoZWlnaHQiLCJjb21wb3NpdGUiLCJ0b0ZpbGUiLCJ0b0J1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJhcHBseVdhdGVybWFyayIsImltYWdlUGF0aCIsIm91dHB1dFBhdGgiLCJvcHRpb25zIiwidGV4dCIsInBvc2l0aW9uIiwic2l6ZSIsImNvbG9yIiwiRXJyb3IiLCJ3YXRlcm1hcmtTdmciLCJnZXRQb3NpdGlvblgiLCJnZXRQb3NpdGlvblkiLCJnZXRUZXh0QW5jaG9yIiwiaW5wdXQiLCJncmF2aXR5IiwiZXJyb3IiLCJhcHBseVdhdGVybWFya1RvQnVmZmVyIiwiaW1hZ2VCdWZmZXIiLCJwYWRkaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/watermark.ts\n");

/***/ }),

/***/ "(api)/./pages/api/articles/[slug].ts":
/*!**************************************!*\
  !*** ./pages/api/articles/[slug].ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\n/* harmony import */ var _lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/middleware/error-handler */ \"(api)/./lib/api/middleware/error-handler.ts\");\n/* harmony import */ var _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/api/middleware/auth */ \"(api)/./lib/api/middleware/auth.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _lib_watermark__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/watermark */ \"(api)/./lib/watermark.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__, zod__WEBPACK_IMPORTED_MODULE_3__]);\n([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__, zod__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n// Validation schemas\nconst articleUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_3__.z.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().min(1, \"Title is required\").max(255, \"Title too long\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().min(1, \"Content is required\"),\n    excerpt: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().max(500, \"Excerpt too long\").optional(),\n    featured_image: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().url(\"Invalid image URL\").nullable().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_3__.z.enum([\n        \"draft\",\n        \"published\",\n        \"archived\"\n    ]),\n    slug: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().min(1, \"Slug is required\").max(255, \"Slug too long\").optional()\n});\n// Rate limiting: 30 requests per minute per user\nconst rateLimitMiddleware = (0,_lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.withRateLimit)(30, 60 * 1000, (req)=>{\n    const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n    return token || req.socket.remoteAddress || \"unknown\";\n});\nasync function handler(req, res) {\n    // Validate article Slug/ID\n    const { slug } = req.query;\n    if (!slug || typeof slug !== \"string\") {\n        return res.status(400).json({\n            success: false,\n            error: {\n                code: \"INVALID_REQUEST\",\n                message: \"Valid article slug or ID is required\",\n                details: null\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n    // Check if the parameter is a slug (contains hyphens, letters) or ID (uuid format)\n    // UUID regex: 8-4-4-4-12 hex digits\n    const isUuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(slug);\n    const queryField = isUuid ? \"id\" : \"slug\";\n    try {\n        // Apply rate limiting\n        rateLimitMiddleware(req);\n        // GET - Single article with author info (by ID or slug)\n        if (req.method === \"GET\") {\n            const { data: article, error } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(`\n          *,\n          author:users(id, name, avatar_url, bio),\n          category:categories(id, name, slug)\n        `).eq(queryField, slug).single();\n            if (error || !article) {\n                return res.status(404).json({\n                    success: false,\n                    error: {\n                        code: \"ARTICLE_NOT_FOUND\",\n                        message: \"Article not found\",\n                        details: error?.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // If not published and not the author/admin, might want to restrict access\n            // But for now, we'll return it (frontend handles display logic or we can add auth check here)\n            return res.status(200).json({\n                success: true,\n                data: {\n                    article\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // PUT - Update article\n        if (req.method === \"PUT\") {\n            // Authenticate user\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    success: false,\n                    error: {\n                        code: \"UNAUTHORIZED\",\n                        message: \"No authorization token provided\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            const token = authHeader.replace(\"Bearer \", \"\");\n            const { data: { user: authUser }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n            if (authError || !authUser) {\n                return res.status(401).json({\n                    success: false,\n                    error: {\n                        code: \"UNAUTHORIZED\",\n                        message: \"Invalid or expired token\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Get user role\n            const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", authUser.id).single();\n            if (userError) {\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"INTERNAL_ERROR\",\n                        message: \"Failed to fetch user role\",\n                        details: userError.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Fetch existing article to check ownership\n            const { data: existingArticle, error: fetchError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"author_id, published_at\").eq(queryField, slug).single();\n            if (fetchError || !existingArticle) {\n                return res.status(404).json({\n                    success: false,\n                    error: {\n                        code: \"NOT_FOUND\",\n                        message: \"Article not found\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Check permissions: Must be author or admin/editor\n            const isAdminOrEditor = [\n                \"admin\",\n                \"editor\"\n            ].includes(userData?.role || \"\");\n            const isAuthor = existingArticle.author_id === authUser.id;\n            if (!isAuthor && !isAdminOrEditor) {\n                return res.status(403).json({\n                    success: false,\n                    error: {\n                        code: \"FORBIDDEN\",\n                        message: \"You do not have permission to edit this article\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Validate body\n            const validation = articleUpdateSchema.safeParse(req.body);\n            if (!validation.success) {\n                return res.status(400).json({\n                    success: false,\n                    error: {\n                        code: \"VALIDATION_ERROR\",\n                        message: \"Invalid article data\",\n                        details: validation.error\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            const { title, content, excerpt, featured_image, status, slug: newSlug } = validation.data;\n            // Process featured image with watermark if provided and status is published\n            if (featured_image && status === \"published\") {\n                try {\n                    // If it's a URL, download and process it\n                    if (featured_image.startsWith(\"http\")) {\n                        const response = await fetch(featured_image);\n                        const imageBuffer = Buffer.from(await response.arrayBuffer());\n                        await (0,_lib_watermark__WEBPACK_IMPORTED_MODULE_4__.applyWatermarkToBuffer)(imageBuffer, {\n                            text: \"VOU - Voice of UPSA\",\n                            position: \"bottom-right\",\n                            opacity: 0.7,\n                            size: 32\n                        });\n                        // Upload watermarked image back to storage or CDN\n                        // For now, we'll keep the original URL but in production you'd upload the new image\n                        console.log(\"Watermark applied to featured image on update\");\n                    }\n                } catch (error) {\n                    console.error(\"Error applying watermark:\", error);\n                // Continue without watermark if it fails\n                }\n            }\n            // Update article\n            const updateData = {\n                title,\n                content,\n                excerpt: excerpt ?? null,\n                featured_image: featured_image ?? null,\n                status,\n                updated_at: new Date().toISOString(),\n                published_at: existingArticle.published_at\n            };\n            if (newSlug) {\n                updateData.slug = newSlug;\n            }\n            if (status === \"published\" && !existingArticle.published_at) {\n                updateData.published_at = new Date().toISOString();\n            }\n            const { data: updatedArticle, error: updateError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").update(updateData).eq(queryField, slug).select().single();\n            if (updateError) {\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"UPDATE_ERROR\",\n                        message: \"Failed to update article\",\n                        details: updateError.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            return res.status(200).json({\n                success: true,\n                data: {\n                    article: updatedArticle\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // DELETE - Delete article\n        if (req.method === \"DELETE\") {\n            // Authenticate user\n            const authHeader = req.headers.authorization;\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                return res.status(401).json({\n                    success: false,\n                    error: {\n                        code: \"UNAUTHORIZED\",\n                        message: \"No authorization token provided\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            const token = authHeader.replace(\"Bearer \", \"\");\n            const { data: { user: authUser }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n            if (authError || !authUser) {\n                return res.status(401).json({\n                    success: false,\n                    error: {\n                        code: \"UNAUTHORIZED\",\n                        message: \"Invalid or expired token\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Get user role\n            const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", authUser.id).single();\n            if (userError) {\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"INTERNAL_ERROR\",\n                        message: \"Failed to fetch user role\",\n                        details: userError.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Fetch existing article to check ownership\n            const { data: existingArticle, error: fetchError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"author_id, published_at\").eq(queryField, slug).single();\n            if (fetchError || !existingArticle) {\n                return res.status(404).json({\n                    success: false,\n                    error: {\n                        code: \"NOT_FOUND\",\n                        message: \"Article not found\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Check permissions: Must be author or admin\n            const isAdmin = userData?.role === \"admin\";\n            const isAuthor = existingArticle.author_id === authUser.id;\n            if (!isAuthor && !isAdmin) {\n                return res.status(403).json({\n                    success: false,\n                    error: {\n                        code: \"FORBIDDEN\",\n                        message: \"You do not have permission to delete this article\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            const { error: deleteError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").delete().eq(queryField, slug);\n            if (deleteError) {\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"DELETE_ERROR\",\n                        message: \"Failed to delete article\",\n                        details: deleteError.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            return res.status(200).json({\n                success: true,\n                message: \"Article deleted successfully\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        return res.status(405).json({\n            success: false,\n            error: {\n                code: \"METHOD_NOT_ALLOWED\",\n                message: \"Method not allowed\",\n                details: null\n            },\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: {\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"An unexpected error occurred\",\n                details: error instanceof Error ? error.message : String(error)\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__.withErrorHandler)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNOQyxTQUFTO2dCQUNUQyxTQUFTSCxpQkFBaUIwRCxRQUFRMUQsTUFBTUUsT0FBTyxHQUFHeUQsT0FBTzNEO1lBQzNEO1lBQ0FJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGO0FBQ0Y7QUFFQSxpRUFBZXRDLG1GQUFnQkEsQ0FBQzJCLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vcGFnZXMvYXBpL2FydGljbGVzL1tzbHVnXS50cz9hMzliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9kYXRhYmFzZS1zZXJ2ZXInO1xuaW1wb3J0IHsgd2l0aEVycm9ySGFuZGxlciB9IGZyb20gJ0AvbGliL2FwaS9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXInO1xuaW1wb3J0IHsgd2l0aFJhdGVMaW1pdCB9IGZyb20gJ0AvbGliL2FwaS9taWRkbGV3YXJlL2F1dGgnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBhcHBseVdhdGVybWFya1RvQnVmZmVyIH0gZnJvbSAnQC9saWIvd2F0ZXJtYXJrJztcblxuLy8gVmFsaWRhdGlvbiBzY2hlbWFzXG5jb25zdCBhcnRpY2xlVXBkYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMSwgJ1RpdGxlIGlzIHJlcXVpcmVkJykubWF4KDI1NSwgJ1RpdGxlIHRvbyBsb25nJyksXG4gIGNvbnRlbnQ6IHouc3RyaW5nKCkubWluKDEsICdDb250ZW50IGlzIHJlcXVpcmVkJyksXG4gIGV4Y2VycHQ6IHouc3RyaW5nKCkubWF4KDUwMCwgJ0V4Y2VycHQgdG9vIGxvbmcnKS5vcHRpb25hbCgpLFxuICBmZWF0dXJlZF9pbWFnZTogei5zdHJpbmcoKS51cmwoJ0ludmFsaWQgaW1hZ2UgVVJMJykubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICBzdGF0dXM6IHouZW51bShbJ2RyYWZ0JywgJ3B1Ymxpc2hlZCcsICdhcmNoaXZlZCddKSxcbiAgc2x1Zzogei5zdHJpbmcoKS5taW4oMSwgJ1NsdWcgaXMgcmVxdWlyZWQnKS5tYXgoMjU1LCAnU2x1ZyB0b28gbG9uZycpLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBSYXRlIGxpbWl0aW5nOiAzMCByZXF1ZXN0cyBwZXIgbWludXRlIHBlciB1c2VyXG5jb25zdCByYXRlTGltaXRNaWRkbGV3YXJlID0gd2l0aFJhdGVMaW1pdCgzMCwgNjAgKiAxMDAwLCAocmVxKSA9PiB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcbiAgcmV0dXJuIHRva2VuIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcyB8fCAndW5rbm93bic7XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICAvLyBWYWxpZGF0ZSBhcnRpY2xlIFNsdWcvSURcbiAgY29uc3QgeyBzbHVnIH0gPSByZXEucXVlcnk7XG4gIFxuICBpZiAoIXNsdWcgfHwgdHlwZW9mIHNsdWcgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0lOVkFMSURfUkVRVUVTVCcsXG4gICAgICAgIG1lc3NhZ2U6ICdWYWxpZCBhcnRpY2xlIHNsdWcgb3IgSUQgaXMgcmVxdWlyZWQnLFxuICAgICAgICBkZXRhaWxzOiBudWxsXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHRoZSBwYXJhbWV0ZXIgaXMgYSBzbHVnIChjb250YWlucyBoeXBoZW5zLCBsZXR0ZXJzKSBvciBJRCAodXVpZCBmb3JtYXQpXG4gIC8vIFVVSUQgcmVnZXg6IDgtNC00LTQtMTIgaGV4IGRpZ2l0c1xuICBjb25zdCBpc1V1aWQgPSAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezEyfSQvaS50ZXN0KHNsdWcpO1xuICBjb25zdCBxdWVyeUZpZWxkID0gaXNVdWlkID8gJ2lkJyA6ICdzbHVnJztcblxuICB0cnkge1xuICAgIC8vIEFwcGx5IHJhdGUgbGltaXRpbmdcbiAgICByYXRlTGltaXRNaWRkbGV3YXJlKHJlcSk7XG5cbiAgICAvLyBHRVQgLSBTaW5nbGUgYXJ0aWNsZSB3aXRoIGF1dGhvciBpbmZvIChieSBJRCBvciBzbHVnKVxuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgICAgY29uc3QgeyBkYXRhOiBhcnRpY2xlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnYXJ0aWNsZXMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIGF1dGhvcjp1c2VycyhpZCwgbmFtZSwgYXZhdGFyX3VybCwgYmlvKSxcbiAgICAgICAgICBjYXRlZ29yeTpjYXRlZ29yaWVzKGlkLCBuYW1lLCBzbHVnKVxuICAgICAgICBgKVxuICAgICAgICAuZXEocXVlcnlGaWVsZCwgc2x1ZylcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoZXJyb3IgfHwgIWFydGljbGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0FSVElDTEVfTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdBcnRpY2xlIG5vdCBmb3VuZCcsXG4gICAgICAgICAgICBkZXRhaWxzOiBlcnJvcj8ubWVzc2FnZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vdCBwdWJsaXNoZWQgYW5kIG5vdCB0aGUgYXV0aG9yL2FkbWluLCBtaWdodCB3YW50IHRvIHJlc3RyaWN0IGFjY2Vzc1xuICAgICAgLy8gQnV0IGZvciBub3csIHdlJ2xsIHJldHVybiBpdCAoZnJvbnRlbmQgaGFuZGxlcyBkaXNwbGF5IGxvZ2ljIG9yIHdlIGNhbiBhZGQgYXV0aCBjaGVjayBoZXJlKVxuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB7IGFydGljbGUgfSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFBVVCAtIFVwZGF0ZSBhcnRpY2xlXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQVVQnKSB7XG4gICAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ05vIGF1dGhvcml6YXRpb24gdG9rZW4gcHJvdmlkZWQnLFxuICAgICAgICAgICAgZGV0YWlsczogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xuICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXI6IGF1dGhVc2VyIH0sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5nZXRVc2VyKHRva2VuKTtcbiAgICAgIFxuICAgICAgaWYgKGF1dGhFcnJvciB8fCAhYXV0aFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcbiAgICAgICAgICAgIGRldGFpbHM6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdXNlciByb2xlXG4gICAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCBlcnJvcjogdXNlckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC5zZWxlY3QoJ3JvbGUnKVxuICAgICAgICAuZXEoJ2lkJywgYXV0aFVzZXIuaWQpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKHVzZXJFcnJvcikge1xuICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX0VSUk9SJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggdXNlciByb2xlJyxcbiAgICAgICAgICAgIGRldGFpbHM6IHVzZXJFcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRmV0Y2ggZXhpc3RpbmcgYXJ0aWNsZSB0byBjaGVjayBvd25lcnNoaXBcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdBcnRpY2xlLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgnYXJ0aWNsZXMnKVxuICAgICAgICAuc2VsZWN0KCdhdXRob3JfaWQsIHB1Ymxpc2hlZF9hdCcpXG4gICAgICAgIC5lcShxdWVyeUZpZWxkLCBzbHVnKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChmZXRjaEVycm9yIHx8ICFleGlzdGluZ0FydGljbGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ05PVF9GT1VORCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQXJ0aWNsZSBub3QgZm91bmQnLFxuICAgICAgICAgICAgZGV0YWlsczogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIHBlcm1pc3Npb25zOiBNdXN0IGJlIGF1dGhvciBvciBhZG1pbi9lZGl0b3JcbiAgICAgIGNvbnN0IGlzQWRtaW5PckVkaXRvciA9IFsnYWRtaW4nLCAnZWRpdG9yJ10uaW5jbHVkZXModXNlckRhdGE/LnJvbGUgfHwgJycpO1xuICAgICAgY29uc3QgaXNBdXRob3IgPSBleGlzdGluZ0FydGljbGUuYXV0aG9yX2lkID09PSBhdXRoVXNlci5pZDtcblxuICAgICAgaWYgKCFpc0F1dGhvciAmJiAhaXNBZG1pbk9yRWRpdG9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdGT1JCSURERU4nLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBkbyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGVkaXQgdGhpcyBhcnRpY2xlJyxcbiAgICAgICAgICAgIGRldGFpbHM6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBib2R5XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXJ0aWNsZVVwZGF0ZVNjaGVtYS5zYWZlUGFyc2UocmVxLmJvZHkpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgYXJ0aWNsZSBkYXRhJyxcbiAgICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3JcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IHRpdGxlLCBjb250ZW50LCBleGNlcnB0LCBmZWF0dXJlZF9pbWFnZSwgc3RhdHVzLCBzbHVnOiBuZXdTbHVnIH0gPSB2YWxpZGF0aW9uLmRhdGE7XG5cbiAgICAgIC8vIFByb2Nlc3MgZmVhdHVyZWQgaW1hZ2Ugd2l0aCB3YXRlcm1hcmsgaWYgcHJvdmlkZWQgYW5kIHN0YXR1cyBpcyBwdWJsaXNoZWRcbiAgICAgIGlmIChmZWF0dXJlZF9pbWFnZSAmJiBzdGF0dXMgPT09ICdwdWJsaXNoZWQnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gSWYgaXQncyBhIFVSTCwgZG93bmxvYWQgYW5kIHByb2Nlc3MgaXRcbiAgICAgICAgICBpZiAoZmVhdHVyZWRfaW1hZ2Uuc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZlYXR1cmVkX2ltYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlQnVmZmVyID0gQnVmZmVyLmZyb20oYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCBhcHBseVdhdGVybWFya1RvQnVmZmVyKGltYWdlQnVmZmVyLCB7XG4gICAgICAgICAgICAgIHRleHQ6ICdWT1UgLSBWb2ljZSBvZiBVUFNBJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnLFxuICAgICAgICAgICAgICBvcGFjaXR5OiAwLjcsXG4gICAgICAgICAgICAgIHNpemU6IDMyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBsb2FkIHdhdGVybWFya2VkIGltYWdlIGJhY2sgdG8gc3RvcmFnZSBvciBDRE5cbiAgICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIGtlZXAgdGhlIG9yaWdpbmFsIFVSTCBidXQgaW4gcHJvZHVjdGlvbiB5b3UnZCB1cGxvYWQgdGhlIG5ldyBpbWFnZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dhdGVybWFyayBhcHBsaWVkIHRvIGZlYXR1cmVkIGltYWdlIG9uIHVwZGF0ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhcHBseWluZyB3YXRlcm1hcms6JywgZXJyb3IpO1xuICAgICAgICAgIC8vIENvbnRpbnVlIHdpdGhvdXQgd2F0ZXJtYXJrIGlmIGl0IGZhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGFydGljbGVcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IHtcbiAgICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICBleGNlcnB0OiBzdHJpbmcgfCBudWxsO1xuICAgICAgICBmZWF0dXJlZF9pbWFnZTogc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgICAgIHVwZGF0ZWRfYXQ6IHN0cmluZztcbiAgICAgICAgc2x1Zz86IHN0cmluZztcbiAgICAgICAgcHVibGlzaGVkX2F0Pzogc3RyaW5nO1xuICAgICAgfSA9IHtcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGV4Y2VycHQ6IGV4Y2VycHQgPz8gbnVsbCxcbiAgICAgICAgZmVhdHVyZWRfaW1hZ2U6IGZlYXR1cmVkX2ltYWdlID8/IG51bGwsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBwdWJsaXNoZWRfYXQ6IGV4aXN0aW5nQXJ0aWNsZS5wdWJsaXNoZWRfYXRcbiAgICAgIH07XG5cbiAgICAgIGlmIChuZXdTbHVnKSB7XG4gICAgICAgIHVwZGF0ZURhdGEuc2x1ZyA9IG5ld1NsdWc7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0dXMgPT09ICdwdWJsaXNoZWQnICYmICFleGlzdGluZ0FydGljbGUucHVibGlzaGVkX2F0KSB7XG4gICAgICAgIHVwZGF0ZURhdGEucHVibGlzaGVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRBcnRpY2xlLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcbiAgICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgICAuZXEocXVlcnlGaWVsZCwgc2x1ZylcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdVUERBVEVfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byB1cGRhdGUgYXJ0aWNsZScsXG4gICAgICAgICAgICBkZXRhaWxzOiB1cGRhdGVFcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogeyBhcnRpY2xlOiB1cGRhdGVkQXJ0aWNsZSB9LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gREVMRVRFIC0gRGVsZXRlIGFydGljbGVcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ05vIGF1dGhvcml6YXRpb24gdG9rZW4gcHJvdmlkZWQnLFxuICAgICAgICAgICAgZGV0YWlsczogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xuICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXI6IGF1dGhVc2VyIH0sIGVycm9yOiBhdXRoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5nZXRVc2VyKHRva2VuKTtcbiAgICAgIFxuICAgICAgaWYgKGF1dGhFcnJvciB8fCAhYXV0aFVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcbiAgICAgICAgICAgIGRldGFpbHM6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAgLy8gR2V0IHVzZXIgcm9sZVxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAuc2VsZWN0KCdyb2xlJylcbiAgICAgICAgLmVxKCdpZCcsIGF1dGhVc2VyLmlkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmICh1c2VyRXJyb3IpIHtcbiAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9FUlJPUicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIHVzZXIgcm9sZScsXG4gICAgICAgICAgICBkZXRhaWxzOiB1c2VyRXJyb3IubWVzc2FnZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZldGNoIGV4aXN0aW5nIGFydGljbGUgdG8gY2hlY2sgb3duZXJzaGlwXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nQXJ0aWNsZSwgZXJyb3I6IGZldGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcbiAgICAgICAgLnNlbGVjdCgnYXV0aG9yX2lkLCBwdWJsaXNoZWRfYXQnKVxuICAgICAgICAuZXEocXVlcnlGaWVsZCwgc2x1ZylcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoZmV0Y2hFcnJvciB8fCAhZXhpc3RpbmdBcnRpY2xlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0FydGljbGUgbm90IGZvdW5kJyxcbiAgICAgICAgICAgIGRldGFpbHM6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBwZXJtaXNzaW9uczogTXVzdCBiZSBhdXRob3Igb3IgYWRtaW5cbiAgICAgIGNvbnN0IGlzQWRtaW4gPSB1c2VyRGF0YT8ucm9sZSA9PT0gJ2FkbWluJztcbiAgICAgIGNvbnN0IGlzQXV0aG9yID0gZXhpc3RpbmdBcnRpY2xlLmF1dGhvcl9pZCA9PT0gYXV0aFVzZXIuaWQ7XG5cbiAgICAgIGlmICghaXNBdXRob3IgJiYgIWlzQWRtaW4pIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZGVsZXRlIHRoaXMgYXJ0aWNsZScsXG4gICAgICAgICAgICBkZXRhaWxzOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcShxdWVyeUZpZWxkLCBzbHVnKTtcblxuICAgICAgaWYgKGRlbGV0ZUVycm9yKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgIGNvZGU6ICdERUxFVEVfRVJST1InLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBkZWxldGUgYXJ0aWNsZScsXG4gICAgICAgICAgICBkZXRhaWxzOiBkZWxldGVFcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0FydGljbGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ01FVEhPRF9OT1RfQUxMT1dFRCcsXG4gICAgICAgIG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnLFxuICAgICAgICBkZXRhaWxzOiBudWxsXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIG1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG4gICAgICB9LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoRXJyb3JIYW5kbGVyKGhhbmRsZXIpO1xuIl0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJ3aXRoRXJyb3JIYW5kbGVyIiwid2l0aFJhdGVMaW1pdCIsInoiLCJhcHBseVdhdGVybWFya1RvQnVmZmVyIiwiYXJ0aWNsZVVwZGF0ZVNjaGVtYSIsIm9iamVjdCIsInRpdGxlIiwic3RyaW5nIiwibWluIiwibWF4IiwiY29udGVudCIsImV4Y2VycHQiLCJvcHRpb25hbCIsImZlYXR1cmVkX2ltYWdlIiwidXJsIiwibnVsbGFibGUiLCJzdGF0dXMiLCJlbnVtIiwic2x1ZyIsInJhdGVMaW1pdE1pZGRsZXdhcmUiLCJyZXEiLCJ0b2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVwbGFjZSIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJoYW5kbGVyIiwicmVzIiwicXVlcnkiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaXNVdWlkIiwidGVzdCIsInF1ZXJ5RmllbGQiLCJtZXRob2QiLCJkYXRhIiwiYXJ0aWNsZSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImF1dGhIZWFkZXIiLCJzdGFydHNXaXRoIiwidXNlciIsImF1dGhVc2VyIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VyRGF0YSIsInVzZXJFcnJvciIsImlkIiwiZXhpc3RpbmdBcnRpY2xlIiwiZmV0Y2hFcnJvciIsImlzQWRtaW5PckVkaXRvciIsImluY2x1ZGVzIiwicm9sZSIsImlzQXV0aG9yIiwiYXV0aG9yX2lkIiwidmFsaWRhdGlvbiIsInNhZmVQYXJzZSIsImJvZHkiLCJuZXdTbHVnIiwicmVzcG9uc2UiLCJmZXRjaCIsImltYWdlQnVmZmVyIiwiQnVmZmVyIiwiYXJyYXlCdWZmZXIiLCJ0ZXh0IiwicG9zaXRpb24iLCJvcGFjaXR5Iiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVEYXRhIiwidXBkYXRlZF9hdCIsInB1Ymxpc2hlZF9hdCIsInVwZGF0ZWRBcnRpY2xlIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJpc0FkbWluIiwiZGVsZXRlRXJyb3IiLCJkZWxldGUiLCJFcnJvciIsIlN0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/articles/[slug].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8"], () => (__webpack_exec__("(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Farticles%2F%5Bslug%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Carticles%5C%5Bslug%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();