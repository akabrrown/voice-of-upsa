"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/bookmarks";
exports.ids = ["pages/api/user/bookmarks"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fbookmarks&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cbookmarks.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fbookmarks&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cbookmarks.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\bookmarks.ts */ \"(api)/./pages/api/user/bookmarks.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/bookmarks\",\n        pathname: \"/api/user/bookmarks\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_user_bookmarks_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zM19AYmFiZWwrY29yZUA3Ll9jNzk3NWYyZWUyY2VjZmY2MGVlMDU1ZTFmMWYzMDNhOC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVzZXIlMkZib29rbWFya3MmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3VzZXIlNUNib29rbWFya3MudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx5REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLz8zMWQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdXNlclxcXFxib29rbWFya3MudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyL2Jvb2ttYXJrc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvYm9va21hcmtzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fbookmarks&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cbookmarks.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/error-handler.ts":
/*!*********************************************!*\
  !*** ./lib/api/middleware/error-handler.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nclass AuthenticationError extends Error {\n    constructor(message = \"Authentication required\"){\n        super(message);\n        this.statusCode = 401;\n        this.code = \"AUTHENTICATION_ERROR\";\n        this.name = \"AuthenticationError\";\n    }\n}\nclass ValidationError extends Error {\n    constructor(message = \"Invalid input data\"){\n        super(message);\n        this.statusCode = 400;\n        this.code = \"VALIDATION_ERROR\";\n        this.name = \"ValidationError\";\n    }\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            console.error(\"API Error:\", error);\n            const statusCode = error && typeof error === \"object\" && \"statusCode\" in error ? error.statusCode : 500;\n            const message = error instanceof Error ? error.message : error && typeof error === \"object\" && \"message\" in error ? error.message : \"Internal Server Error\";\n            const code = error && typeof error === \"object\" && \"code\" in error ? error.code : \"INTERNAL_SERVER_ERROR\";\n            // Ensure we haven't already sent a response\n            if (!res.writableEnded) {\n                const response = {\n                    success: false,\n                    error: {\n                        code,\n                        message,\n                        details:  true && error instanceof Error ? error.stack : undefined\n                    },\n                    timestamp: new Date().toISOString()\n                };\n                res.status(statusCode).json(response);\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpL21pZGRsZXdhcmUvZXJyb3ItaGFuZGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFZTyxNQUFNQSw0QkFBNEJDO0lBSXZDQyxZQUFZQyxVQUFrQix5QkFBeUIsQ0FBRTtRQUN2RCxLQUFLLENBQUNBO2FBSlJDLGFBQWE7YUFDYkMsT0FBTztRQUlMLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1DLHdCQUF3Qk47SUFJbkNDLFlBQVlDLFVBQWtCLG9CQUFvQixDQUFFO1FBQ2xELEtBQUssQ0FBQ0E7YUFKUkMsYUFBYTthQUNiQyxPQUFPO1FBSUwsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sU0FBU0UsaUJBQWlCQyxPQUF1QjtJQUN0RCxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsTUFBTUYsUUFBUUMsS0FBS0M7UUFDckIsRUFBRSxPQUFPQyxPQUFnQjtZQUN2QkMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1lBRTVCLE1BQU1SLGFBQWFRLFNBQVMsT0FBT0EsVUFBVSxZQUFZLGdCQUFnQkEsUUFBU0EsTUFBTVIsVUFBVSxHQUFjO1lBQ2hILE1BQU1ELFVBQVVTLGlCQUFpQlgsUUFBUVcsTUFBTVQsT0FBTyxHQUNuRFMsU0FBUyxPQUFPQSxVQUFVLFlBQVksYUFBYUEsUUFBUSxNQUErQlQsT0FBTyxHQUFHO1lBQ3ZHLE1BQU1FLE9BQU9PLFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLFFBQVNBLE1BQU1QLElBQUksR0FBYztZQUU5Riw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDTSxJQUFJRyxhQUFhLEVBQUU7Z0JBQ3RCLE1BQU1DLFdBQTZCO29CQUNqQ0MsU0FBUztvQkFDVEosT0FBTzt3QkFDTFA7d0JBQ0FGO3dCQUNBYyxTQUFTQyxLQUF5QixJQUFpQk4saUJBQWlCWCxRQUFRVyxNQUFNTyxLQUFLLEdBQUdDO29CQUM1RjtvQkFDQUMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztnQkFFQVosSUFBSWEsTUFBTSxDQUFDcEIsWUFBWXFCLElBQUksQ0FBQ1Y7WUFDOUI7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vbGliL2FwaS9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXIudHM/Njg4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlFcnJvclJlc3BvbnNlIHtcclxuICBzdWNjZXNzOiBmYWxzZTtcclxuICBlcnJvcjoge1xyXG4gICAgY29kZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZGV0YWlscz86IHVua25vd247XHJcbiAgfTtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMTtcclxuICBjb2RlID0gJ0FVVEhFTlRJQ0FUSU9OX0VSUk9SJztcclxuICBcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdBdXRoZW50aWNhdGlvbkVycm9yJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMDtcclxuICBjb2RlID0gJ1ZBTElEQVRJT05fRVJST1InO1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnZhbGlkIGlucHV0IGRhdGEnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdWYWxpZGF0aW9uRXJyb3InO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsZXIoaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzQ29kZScgaW4gZXJyb3IgPyAoZXJyb3Iuc3RhdHVzQ29kZSBhcyBudW1iZXIpIDogNTAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcclxuICAgICAgICAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IgPyAoZXJyb3IgYXMgeyBtZXNzYWdlOiBzdHJpbmcgfSkubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcclxuICAgICAgY29uc3QgY29kZSA9IGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ2NvZGUnIGluIGVycm9yID8gKGVycm9yLmNvZGUgYXMgc3RyaW5nKSA6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InO1xyXG5cclxuICAgICAgLy8gRW5zdXJlIHdlIGhhdmVuJ3QgYWxyZWFkeSBzZW50IGEgcmVzcG9uc2VcclxuICAgICAgaWYgKCFyZXMud3JpdGFibGVFbmRlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlFcnJvclJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgICBjb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwibmFtZSIsIlZhbGlkYXRpb25FcnJvciIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJjb25zb2xlIiwid3JpdGFibGVFbmRlZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJwcm9jZXNzIiwic3RhY2siLCJ1bmRlZmluZWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/error-handler.ts\n");

/***/ }),

/***/ "(api)/./lib/database-server.ts":
/*!********************************!*\
  !*** ./lib/database-server.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = \"https://hewrjnconmykfzggwhzg.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n}\nif (!supabaseServiceKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable\");\n}\n// Create a Supabase client with the service role key for admin operations\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRWhFLElBQUksQ0FBQ0wsYUFBYTtJQUNoQixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJLENBQUNGLG9CQUFvQjtJQUN2QixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSwwRUFBMEU7QUFDbkUsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FBQ0MsYUFBYUksb0JBQW9CO0lBQ3pFSSxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzP2NkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxuaWYgKCFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgd2l0aCB0aGUgc2VydmljZSByb2xlIGtleSBmb3IgYWRtaW4gb3BlcmF0aW9uc1xyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcclxuICB9XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database-server.ts\n");

/***/ }),

/***/ "(api)/./pages/api/user/bookmarks.ts":
/*!*************************************!*\
  !*** ./pages/api/user/bookmarks.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\n/* harmony import */ var _lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/middleware/error-handler */ \"(api)/./lib/api/middleware/error-handler.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            success: false,\n            error: {\n                code: \"METHOD_NOT_ALLOWED\",\n                message: \"Only GET method is allowed\",\n                details: null\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n    try {\n        console.log(\"Bookmarks API called\");\n        // Simple auth check - get token from header\n        const authHeader = req.headers.authorization;\n        if (!authHeader) {\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: \"No authorization header\",\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        // Verify token with Supabase\n        const { data: { user }, error } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n        if (error || !user) {\n            console.error(\"Auth error:\", error);\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: \"Invalid token\",\n                    details: error?.message\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        console.log(\"User authenticated:\", user.id);\n        // Validate pagination parameters\n        const paginationSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n            page: zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number().min(1).default(1),\n            limit: zod__WEBPACK_IMPORTED_MODULE_2__.z.coerce.number().min(1).max(50).default(10)\n        });\n        const validatedParams = paginationSchema.parse(req.query);\n        const limit = validatedParams.limit;\n        const offset = (validatedParams.page - 1) * limit;\n        console.log(\"Fetching bookmarks for user:\", user.id, \"limit:\", limit, \"offset:\", offset);\n        // Get user's bookmarked articles with direct joins\n        const { data: bookmarks, error: bookmarksError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"article_bookmarks\").select(`\r\n        id,\r\n        article_id,\r\n        created_at\r\n      `).eq(\"user_id\", user.id).order(\"created_at\", {\n            ascending: false\n        }).range(offset, offset + limit - 1);\n        console.log(\"Bookmarks query result:\", {\n            bookmarks,\n            bookmarksError\n        });\n        if (bookmarksError) {\n            console.error(\"Error fetching bookmarks:\", bookmarksError);\n            // Check if the table doesn't exist\n            if (bookmarksError.message?.includes(\"does not exist\") || bookmarksError.code === \"PGRST116\") {\n                return res.status(200).json({\n                    success: true,\n                    data: {\n                        message: \"Bookmarks table does not exist yet - please run the SQL schema\",\n                        bookmarks: [],\n                        pagination: {\n                            currentPage: validatedParams.page,\n                            totalPages: 0,\n                            totalItems: 0,\n                            itemsPerPage: limit,\n                            hasNextPage: false,\n                            hasPreviousPage: false\n                        }\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            return res.status(500).json({\n                success: false,\n                error: {\n                    code: \"BOOKMARKS_QUERY_FAILED\",\n                    message: \"Failed to fetch bookmarks\",\n                    details: bookmarksError.message\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // If no bookmarks found, return empty response\n        if (!bookmarks || bookmarks.length === 0) {\n            return res.status(200).json({\n                success: true,\n                data: {\n                    bookmarks: [],\n                    pagination: {\n                        currentPage: validatedParams.page,\n                        totalPages: 0,\n                        totalItems: 0,\n                        itemsPerPage: limit,\n                        hasNextPage: false,\n                        hasPreviousPage: false\n                    }\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Now fetch article details for each bookmark\n        const transformedBookmarks = await Promise.all(bookmarks.map(async (bookmark)=>{\n            try {\n                console.log(\"Processing bookmark:\", bookmark);\n                // Fetch article details separately\n                const { data: article, error: articleError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"*\").eq(\"id\", bookmark.article_id).single();\n                if (articleError || !article) {\n                    console.error(\"Error fetching article:\", articleError);\n                    throw new Error(\"Article not found\");\n                }\n                console.log(\"Article data:\", article);\n                // Fetch author information with error handling\n                let authorName = \"Unknown\";\n                let authorAvatar = undefined;\n                if (article.author_id) {\n                    try {\n                        const { data: author } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"auth.users\").select(\"raw_user_meta_data, email\").eq(\"id\", article.author_id).single();\n                        authorName = author?.raw_user_meta_data?.name || author?.email || \"Unknown\";\n                        authorAvatar = author?.raw_user_meta_data?.avatar_url;\n                    } catch (authorError) {\n                        console.error(\"Error fetching author:\", authorError);\n                        authorName = \"Unknown\";\n                    }\n                }\n                return {\n                    id: article.id,\n                    title: article.title || \"Untitled Article\",\n                    slug: article.slug || \"\",\n                    excerpt: article.excerpt || \"\",\n                    featured_image: article.featured_image,\n                    author_name: authorName,\n                    author_avatar_url: authorAvatar,\n                    views_count: article.views_count || 0,\n                    likes_count: article.likes_count || 0,\n                    comments_count: article.comments_count || 0,\n                    bookmarks_count: 0,\n                    published_at: article.published_at,\n                    bookmarked_at: bookmark.created_at\n                };\n            } catch (error) {\n                console.error(\"Error processing bookmark:\", error);\n                // Return a minimal bookmark object if processing fails\n                return {\n                    id: bookmark.id || \"error-\" + Date.now(),\n                    title: \"Error loading article\",\n                    slug: \"\",\n                    excerpt: \"\",\n                    featured_image: undefined,\n                    author_name: \"Unknown\",\n                    author_avatar_url: undefined,\n                    views_count: 0,\n                    likes_count: 0,\n                    comments_count: 0,\n                    bookmarks_count: 0,\n                    published_at: new Date().toISOString(),\n                    bookmarked_at: bookmark.created_at\n                };\n            }\n        }));\n        // Get total count of bookmarks\n        let totalCount = 0;\n        try {\n            const { count, error: countError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"article_bookmarks\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).eq(\"user_id\", user.id);\n            if (!countError && count !== null) {\n                totalCount = count;\n            }\n        } catch (error) {\n            console.error(\"Error counting bookmarks:\", error);\n        // Continue with totalCount = 0\n        }\n        res.status(200).json({\n            success: true,\n            data: {\n                bookmarks: transformedBookmarks,\n                pagination: {\n                    currentPage: validatedParams.page,\n                    totalPages: Math.ceil((totalCount || 0) / limit),\n                    totalItems: totalCount || 0,\n                    itemsPerPage: limit,\n                    hasNextPage: offset + limit < (totalCount || 0),\n                    hasPreviousPage: validatedParams.page > 1\n                }\n            },\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Bookmarks API error:\", error);\n        res.status(500).json({\n            success: false,\n            error: {\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"An unexpected error occurred while fetching bookmarks\",\n                details:  true ? error.message : 0\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n// Wrap with error handler middleware\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__.withErrorHandler)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGdCQUFnQlAsSUFBSTtvQkFDakNzQixZQUFZNEMsS0FBS0MsSUFBSSxDQUFDLENBQUNMLGNBQWMsS0FBS3pEO29CQUMxQ2tCLFlBQVl1QyxjQUFjO29CQUMxQnRDLGNBQWNuQjtvQkFDZG9CLGFBQWEsU0FBVXBCLFFBQVV5RCxDQUFBQSxjQUFjO29CQUMvQ3BDLGlCQUFpQm5CLGdCQUFnQlAsSUFBSSxHQUFHO2dCQUMxQztZQUNGO1lBQ0FqQixXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDbkM7SUFFRixFQUFFLE9BQU9OLE9BQU87UUFDZE8sUUFBUVAsS0FBSyxDQUFDLHdCQUF3QkE7UUFDdENMLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJDLFNBQVM7WUFDVEMsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsU0FBU3NGLEtBQXlCLEdBQWdCLE1BQWlCdkYsT0FBTyxHQUFHLENBQUk7WUFDbkY7WUFDQUUsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRjtBQUVBLHFDQUFxQztBQUNyQyxpRUFBZWYsbUZBQWdCQSxDQUFDRSxRQUFRQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9pY2Utb2YtdXBzYS8uL3BhZ2VzL2FwaS91c2VyL2Jvb2ttYXJrcy50cz9iNjJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2RhdGFiYXNlLXNlcnZlcic7XHJcbmltcG9ydCB7IHdpdGhFcnJvckhhbmRsZXIgfSBmcm9tICdAL2xpYi9hcGkvbWlkZGxld2FyZS9lcnJvci1oYW5kbGVyJztcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IHtcclxuICAgICAgICBjb2RlOiAnTUVUSE9EX05PVF9BTExPV0VEJyxcclxuICAgICAgICBtZXNzYWdlOiAnT25seSBHRVQgbWV0aG9kIGlzIGFsbG93ZWQnLFxyXG4gICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdCb29rbWFya3MgQVBJIGNhbGxlZCcpO1xyXG4gICAgXHJcbiAgICAvLyBTaW1wbGUgYXV0aCBjaGVjayAtIGdldCB0b2tlbiBmcm9tIGhlYWRlclxyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICBpZiAoIWF1dGhIZWFkZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnTm8gYXV0aG9yaXphdGlvbiBoZWFkZXInLFxyXG4gICAgICAgICAgZGV0YWlsczogbnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgICBcclxuICAgIC8vIFZlcmlmeSB0b2tlbiB3aXRoIFN1cGFiYXNlXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignQXV0aCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHtcclxuICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgdG9rZW4nLFxyXG4gICAgICAgICAgZGV0YWlsczogZXJyb3I/Lm1lc3NhZ2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnVXNlciBhdXRoZW50aWNhdGVkOicsIHVzZXIuaWQpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIHBhZ2luYXRpb24gcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgcGFnaW5hdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcclxuICAgICAgcGFnZTogei5jb2VyY2UubnVtYmVyKCkubWluKDEpLmRlZmF1bHQoMSksXHJcbiAgICAgIGxpbWl0OiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMSkubWF4KDUwKS5kZWZhdWx0KDEwKVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB2YWxpZGF0ZWRQYXJhbXMgPSBwYWdpbmF0aW9uU2NoZW1hLnBhcnNlKHJlcS5xdWVyeSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGxpbWl0ID0gdmFsaWRhdGVkUGFyYW1zLmxpbWl0O1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gKHZhbGlkYXRlZFBhcmFtcy5wYWdlIC0gMSkgKiBsaW1pdDtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGJvb2ttYXJrcyBmb3IgdXNlcjonLCB1c2VyLmlkLCAnbGltaXQ6JywgbGltaXQsICdvZmZzZXQ6Jywgb2Zmc2V0KTtcclxuXHJcbiAgICAvLyBHZXQgdXNlcidzIGJvb2ttYXJrZWQgYXJ0aWNsZXMgd2l0aCBkaXJlY3Qgam9pbnNcclxuICAgIGNvbnN0IHsgZGF0YTogYm9va21hcmtzLCBlcnJvcjogYm9va21hcmtzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ2FydGljbGVfYm9va21hcmtzJylcclxuICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgYXJ0aWNsZV9pZCxcclxuICAgICAgICBjcmVhdGVkX2F0XHJcbiAgICAgIGApXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG4gICAgICAucmFuZ2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCAtIDEpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdCb29rbWFya3MgcXVlcnkgcmVzdWx0OicsIHsgYm9va21hcmtzLCBib29rbWFya3NFcnJvciB9KTtcclxuXHJcbiAgICBpZiAoYm9va21hcmtzRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYm9va21hcmtzOicsIGJvb2ttYXJrc0Vycm9yKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSB0YWJsZSBkb2Vzbid0IGV4aXN0XHJcbiAgICAgIGlmIChib29rbWFya3NFcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSB8fCBib29rbWFya3NFcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdCb29rbWFya3MgdGFibGUgZG9lcyBub3QgZXhpc3QgeWV0IC0gcGxlYXNlIHJ1biB0aGUgU1FMIHNjaGVtYScsXHJcbiAgICAgICAgICAgIGJvb2ttYXJrczogW10sXHJcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgICBjdXJyZW50UGFnZTogdmFsaWRhdGVkUGFyYW1zLnBhZ2UsXHJcbiAgICAgICAgICAgICAgdG90YWxQYWdlczogMCxcclxuICAgICAgICAgICAgICB0b3RhbEl0ZW1zOiAwLFxyXG4gICAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogbGltaXQsXHJcbiAgICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgIGhhc1ByZXZpb3VzUGFnZTogZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHtcclxuICAgICAgICAgIGNvZGU6ICdCT09LTUFSS1NfUVVFUllfRkFJTEVEJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZmV0Y2ggYm9va21hcmtzJyxcclxuICAgICAgICAgIGRldGFpbHM6IGJvb2ttYXJrc0Vycm9yLm1lc3NhZ2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIG5vIGJvb2ttYXJrcyBmb3VuZCwgcmV0dXJuIGVtcHR5IHJlc3BvbnNlXHJcbiAgICBpZiAoIWJvb2ttYXJrcyB8fCBib29rbWFya3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBib29rbWFya3M6IFtdLFxyXG4gICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogdmFsaWRhdGVkUGFyYW1zLnBhZ2UsXHJcbiAgICAgICAgICAgIHRvdGFsUGFnZXM6IDAsXHJcbiAgICAgICAgICAgIHRvdGFsSXRlbXM6IDAsXHJcbiAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogbGltaXQsXHJcbiAgICAgICAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgaGFzUHJldmlvdXNQYWdlOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTm93IGZldGNoIGFydGljbGUgZGV0YWlscyBmb3IgZWFjaCBib29rbWFya1xyXG4gICAgY29uc3QgdHJhbnNmb3JtZWRCb29rbWFya3MgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgYm9va21hcmtzLm1hcChhc3luYyAoYm9va21hcmspID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgYm9va21hcms6JywgYm9va21hcmspO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGZXRjaCBhcnRpY2xlIGRldGFpbHMgc2VwYXJhdGVseVxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBhcnRpY2xlLCBlcnJvcjogYXJ0aWNsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAgIC5mcm9tKCdhcnRpY2xlcycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgICAuZXEoJ2lkJywgYm9va21hcmsuYXJ0aWNsZV9pZClcclxuICAgICAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoYXJ0aWNsZUVycm9yIHx8ICFhcnRpY2xlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFydGljbGU6JywgYXJ0aWNsZUVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcnRpY2xlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQXJ0aWNsZSBkYXRhOicsIGFydGljbGUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGZXRjaCBhdXRob3IgaW5mb3JtYXRpb24gd2l0aCBlcnJvciBoYW5kbGluZ1xyXG4gICAgICAgICAgbGV0IGF1dGhvck5hbWUgPSAnVW5rbm93bic7XHJcbiAgICAgICAgICBsZXQgYXV0aG9yQXZhdGFyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoYXJ0aWNsZS5hdXRob3JfaWQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IGF1dGhvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgICAgICAgICAgLmZyb20oJ2F1dGgudXNlcnMnKVxyXG4gICAgICAgICAgICAgICAgLnNlbGVjdCgncmF3X3VzZXJfbWV0YV9kYXRhLCBlbWFpbCcpXHJcbiAgICAgICAgICAgICAgICAuZXEoJ2lkJywgYXJ0aWNsZS5hdXRob3JfaWQpXHJcbiAgICAgICAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgYXV0aG9yTmFtZSA9IGF1dGhvcj8ucmF3X3VzZXJfbWV0YV9kYXRhPy5uYW1lIHx8IGF1dGhvcj8uZW1haWwgfHwgJ1Vua25vd24nO1xyXG4gICAgICAgICAgICAgIGF1dGhvckF2YXRhciA9IGF1dGhvcj8ucmF3X3VzZXJfbWV0YV9kYXRhPy5hdmF0YXJfdXJsO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChhdXRob3JFcnJvcikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGF1dGhvcjonLCBhdXRob3JFcnJvcik7XHJcbiAgICAgICAgICAgICAgYXV0aG9yTmFtZSA9ICdVbmtub3duJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogYXJ0aWNsZS5pZCxcclxuICAgICAgICAgICAgdGl0bGU6IGFydGljbGUudGl0bGUgfHwgJ1VudGl0bGVkIEFydGljbGUnLFxyXG4gICAgICAgICAgICBzbHVnOiBhcnRpY2xlLnNsdWcgfHwgJycsXHJcbiAgICAgICAgICAgIGV4Y2VycHQ6IGFydGljbGUuZXhjZXJwdCB8fCAnJyxcclxuICAgICAgICAgICAgZmVhdHVyZWRfaW1hZ2U6IGFydGljbGUuZmVhdHVyZWRfaW1hZ2UsXHJcbiAgICAgICAgICAgIGF1dGhvcl9uYW1lOiBhdXRob3JOYW1lLFxyXG4gICAgICAgICAgICBhdXRob3JfYXZhdGFyX3VybDogYXV0aG9yQXZhdGFyLFxyXG4gICAgICAgICAgICB2aWV3c19jb3VudDogYXJ0aWNsZS52aWV3c19jb3VudCB8fCAwLFxyXG4gICAgICAgICAgICBsaWtlc19jb3VudDogYXJ0aWNsZS5saWtlc19jb3VudCB8fCAwLFxyXG4gICAgICAgICAgICBjb21tZW50c19jb3VudDogYXJ0aWNsZS5jb21tZW50c19jb3VudCB8fCAwLFxyXG4gICAgICAgICAgICBib29rbWFya3NfY291bnQ6IDAsIC8vIERlZmF1bHQgdG8gMCBzaW5jZSBjb2x1bW4gZG9lc24ndCBleGlzdFxyXG4gICAgICAgICAgICBwdWJsaXNoZWRfYXQ6IGFydGljbGUucHVibGlzaGVkX2F0LFxyXG4gICAgICAgICAgICBib29rbWFya2VkX2F0OiBib29rbWFyay5jcmVhdGVkX2F0XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGJvb2ttYXJrOicsIGVycm9yKTtcclxuICAgICAgICAgIC8vIFJldHVybiBhIG1pbmltYWwgYm9va21hcmsgb2JqZWN0IGlmIHByb2Nlc3NpbmcgZmFpbHNcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiBib29rbWFyay5pZCB8fCAnZXJyb3ItJyArIERhdGUubm93KCksIC8vIFVzZSBib29rbWFyayBJRCBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBsb2FkaW5nIGFydGljbGUnLFxyXG4gICAgICAgICAgICBzbHVnOiAnJyxcclxuICAgICAgICAgICAgZXhjZXJwdDogJycsXHJcbiAgICAgICAgICAgIGZlYXR1cmVkX2ltYWdlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGF1dGhvcl9uYW1lOiAnVW5rbm93bicsXHJcbiAgICAgICAgICAgIGF1dGhvcl9hdmF0YXJfdXJsOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHZpZXdzX2NvdW50OiAwLFxyXG4gICAgICAgICAgICBsaWtlc19jb3VudDogMCxcclxuICAgICAgICAgICAgY29tbWVudHNfY291bnQ6IDAsXHJcbiAgICAgICAgICAgIGJvb2ttYXJrc19jb3VudDogMCxcclxuICAgICAgICAgICAgcHVibGlzaGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIGJvb2ttYXJrZWRfYXQ6IGJvb2ttYXJrLmNyZWF0ZWRfYXRcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBHZXQgdG90YWwgY291bnQgb2YgYm9va21hcmtzXHJcbiAgICBsZXQgdG90YWxDb3VudCA9IDA7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGNvdW50LCBlcnJvcjogY291bnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdhcnRpY2xlX2Jvb2ttYXJrcycpXHJcbiAgICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKTtcclxuXHJcbiAgICAgIGlmICghY291bnRFcnJvciAmJiBjb3VudCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRvdGFsQ291bnQgPSBjb3VudDtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY291bnRpbmcgYm9va21hcmtzOicsIGVycm9yKTtcclxuICAgICAgLy8gQ29udGludWUgd2l0aCB0b3RhbENvdW50ID0gMFxyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGJvb2ttYXJrczogdHJhbnNmb3JtZWRCb29rbWFya3MsXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgY3VycmVudFBhZ2U6IHZhbGlkYXRlZFBhcmFtcy5wYWdlLFxyXG4gICAgICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKCh0b3RhbENvdW50IHx8IDApIC8gbGltaXQpLFxyXG4gICAgICAgICAgdG90YWxJdGVtczogdG90YWxDb3VudCB8fCAwLFxyXG4gICAgICAgICAgaXRlbXNQZXJQYWdlOiBsaW1pdCxcclxuICAgICAgICAgIGhhc05leHRQYWdlOiAob2Zmc2V0ICsgbGltaXQpIDwgKHRvdGFsQ291bnQgfHwgMCksXHJcbiAgICAgICAgICBoYXNQcmV2aW91c1BhZ2U6IHZhbGlkYXRlZFBhcmFtcy5wYWdlID4gMVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQm9va21hcmtzIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjoge1xyXG4gICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGJvb2ttYXJrcycsXHJcbiAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgOiBudWxsXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFdyYXAgd2l0aCBlcnJvciBoYW5kbGVyIG1pZGRsZXdhcmVcclxuZXhwb3J0IGRlZmF1bHQgd2l0aEVycm9ySGFuZGxlcihoYW5kbGVyKTtcclxuIl0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJ3aXRoRXJyb3JIYW5kbGVyIiwieiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29uc29sZSIsImxvZyIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRva2VuIiwicmVwbGFjZSIsImRhdGEiLCJ1c2VyIiwiYXV0aCIsImdldFVzZXIiLCJpZCIsInBhZ2luYXRpb25TY2hlbWEiLCJvYmplY3QiLCJwYWdlIiwiY29lcmNlIiwibnVtYmVyIiwibWluIiwiZGVmYXVsdCIsImxpbWl0IiwibWF4IiwidmFsaWRhdGVkUGFyYW1zIiwicGFyc2UiLCJxdWVyeSIsIm9mZnNldCIsImJvb2ttYXJrcyIsImJvb2ttYXJrc0Vycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJyYW5nZSIsImluY2x1ZGVzIiwicGFnaW5hdGlvbiIsImN1cnJlbnRQYWdlIiwidG90YWxQYWdlcyIsInRvdGFsSXRlbXMiLCJpdGVtc1BlclBhZ2UiLCJoYXNOZXh0UGFnZSIsImhhc1ByZXZpb3VzUGFnZSIsImxlbmd0aCIsInRyYW5zZm9ybWVkQm9va21hcmtzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImJvb2ttYXJrIiwiYXJ0aWNsZSIsImFydGljbGVFcnJvciIsImFydGljbGVfaWQiLCJzaW5nbGUiLCJFcnJvciIsImF1dGhvck5hbWUiLCJhdXRob3JBdmF0YXIiLCJ1bmRlZmluZWQiLCJhdXRob3JfaWQiLCJhdXRob3IiLCJyYXdfdXNlcl9tZXRhX2RhdGEiLCJuYW1lIiwiZW1haWwiLCJhdmF0YXJfdXJsIiwiYXV0aG9yRXJyb3IiLCJ0aXRsZSIsInNsdWciLCJleGNlcnB0IiwiZmVhdHVyZWRfaW1hZ2UiLCJhdXRob3JfbmFtZSIsImF1dGhvcl9hdmF0YXJfdXJsIiwidmlld3NfY291bnQiLCJsaWtlc19jb3VudCIsImNvbW1lbnRzX2NvdW50IiwiYm9va21hcmtzX2NvdW50IiwicHVibGlzaGVkX2F0IiwiYm9va21hcmtlZF9hdCIsImNyZWF0ZWRfYXQiLCJub3ciLCJ0b3RhbENvdW50IiwiY291bnQiLCJjb3VudEVycm9yIiwiaGVhZCIsIk1hdGgiLCJjZWlsIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/bookmarks.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8"], () => (__webpack_exec__("(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Fbookmarks&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cbookmarks.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();