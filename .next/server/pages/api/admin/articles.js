"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/articles";
exports.ids = ["pages/api/admin/articles"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Farticles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Carticles%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Farticles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Carticles%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\articles\\index.ts */ \"(api)/./pages/api/admin/articles/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/articles\",\n        pathname: \"/api/admin/articles\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_articles_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zM19AYmFiZWwrY29yZUA3Ll9jNzk3NWYyZWUyY2VjZmY2MGVlMDU1ZTFmMWYzMDNhOC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGYXJ0aWNsZXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FkbWluJTVDYXJ0aWNsZXMlNUNpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNvRTtBQUNwRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvPzk5ZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhZG1pblxcXFxhcnRpY2xlc1xcXFxpbmRleC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL2FydGljbGVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vYXJ0aWNsZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Farticles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Carticles%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/auth.ts":
/*!************************************!*\
  !*** ./lib/api/middleware/auth.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticate: () => (/* binding */ authenticate),\n/* harmony export */   checkRole: () => (/* binding */ checkRole),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Simple in-memory rate limiter (for production, use Redis or similar)\nconst rateLimitStore = new Map();\nfunction withRateLimit(maxRequests, windowMs, keyGenerator) {\n    return (req)=>{\n        const key = keyGenerator(req);\n        const now = Date.now();\n        const record = rateLimitStore.get(key);\n        if (!record || now > record.resetTime) {\n            rateLimitStore.set(key, {\n                count: 1,\n                resetTime: now + windowMs\n            });\n            return;\n        }\n        if (record.count >= maxRequests) {\n            const error = new Error(\"Too many requests\");\n            error.statusCode = 429;\n            error.code = \"RATE_LIMIT_EXCEEDED\";\n            throw error;\n        }\n        record.count++;\n    };\n}\nasync function authenticate(req) {\n    const authHeader = req.headers.authorization;\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        const error = new Error(\"No authorization token provided\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    const token = authHeader.replace(\"Bearer \", \"\");\n    // Verify token with Supabase\n    const { data: { user }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n    if (authError || !user) {\n        const error = new Error(\"Invalid or expired token\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    // Get user role from database\n    const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n    if (userError || !userData) {\n        const error = new Error(\"User not found in database\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    return {\n        id: user.id,\n        email: user.email,\n        role: userData.role || \"user\"\n    };\n}\nasync function requireRole(req, allowedRoles) {\n    const user = await authenticate(req);\n    if (!allowedRoles.includes(user.role)) {\n        const error = new Error(\"Insufficient permissions\");\n        error.statusCode = 403;\n        error.code = \"FORBIDDEN\";\n        throw error;\n    }\n    return user;\n}\nfunction checkRole(userRole, allowedRoles) {\n    return allowedRoles.includes(userRole);\n}\nfunction withAuth(handler, options) {\n    return async (req, res)=>{\n        const user = await authenticate(req);\n        if (options?.requiredRole) {\n            const roles = Array.isArray(options.requiredRole) ? options.requiredRole : [\n                options.requiredRole\n            ];\n            if (!roles.includes(user.role)) {\n                const error = new Error(\"Insufficient permissions\");\n                error.statusCode = 403;\n                error.code = \"FORBIDDEN\";\n                throw error;\n            }\n        }\n        return handler(req, res, user);\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJeUMsU0FBU0UsY0FBYztZQUN6QixNQUFNQyxRQUFRQyxNQUFNQyxPQUFPLENBQUNMLFFBQVFFLFlBQVksSUFBSUYsUUFBUUUsWUFBWSxHQUFHO2dCQUFDRixRQUFRRSxZQUFZO2FBQUM7WUFDakcsSUFBSSxDQUFDQyxNQUFNUixRQUFRLENBQUNmLEtBQUtZLElBQUksR0FBRztnQkFDOUIsTUFBTXhCLFFBQVEsSUFBSUMsTUFBTTtnQkFDeEJELE1BQU1FLFVBQVUsR0FBRztnQkFDbkJGLE1BQU1HLElBQUksR0FBRztnQkFDYixNQUFNSDtZQUNSO1FBQ0Y7UUFFQSxPQUFPK0IsUUFBUXhDLEtBQUswQyxLQUFLckI7SUFDM0I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvYXBpL21pZGRsZXdhcmUvYXV0aC50cz8wM2MxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2RhdGFiYXNlLXNlcnZlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxufVxyXG5cclxuLy8gU2ltcGxlIGluLW1lbW9yeSByYXRlIGxpbWl0ZXIgKGZvciBwcm9kdWN0aW9uLCB1c2UgUmVkaXMgb3Igc2ltaWxhcilcclxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9PigpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhSYXRlTGltaXQoXHJcbiAgbWF4UmVxdWVzdHM6IG51bWJlcixcclxuICB3aW5kb3dNczogbnVtYmVyLFxyXG4gIGtleUdlbmVyYXRvcjogKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHN0cmluZ1xyXG4pIHtcclxuICByZXR1cm4gKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHtcclxuICAgIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvcihyZXEpO1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpO1xyXG5cclxuICAgIGlmICghcmVjb3JkIHx8IG5vdyA+IHJlY29yZC5yZXNldFRpbWUpIHtcclxuICAgICAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZWNvcmQuY291bnQgPj0gbWF4UmVxdWVzdHMpIHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1RvbyBtYW55IHJlcXVlc3RzJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQyOTtcclxuICAgICAgZXJyb3IuY29kZSA9ICdSQVRFX0xJTUlUX0VYQ0VFREVEJztcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcmVjb3JkLmNvdW50Kys7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShyZXE6IE5leHRBcGlSZXF1ZXN0KTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG5cclxuICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm8gYXV0aG9yaXphdGlvbiB0b2tlbiBwcm92aWRlZCcpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAxO1xyXG4gICAgZXJyb3IuY29kZSA9ICdVTkFVVEhPUklaRUQnO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuXHJcbiAgLy8gVmVyaWZ5IHRva2VuIHdpdGggU3VwYWJhc2VcclxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmF1dGguZ2V0VXNlcih0b2tlbik7XHJcblxyXG4gIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHVzZXIgcm9sZSBmcm9tIGRhdGFiYXNlXHJcbiAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgLmZyb20oJ3VzZXJzJylcclxuICAgIC5zZWxlY3QoJ3JvbGUnKVxyXG4gICAgLmVxKCdpZCcsIHVzZXIuaWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmICh1c2VyRXJyb3IgfHwgIXVzZXJEYXRhKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2UnKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8ICd1c2VyJ1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlUm9sZShyZXE6IE5leHRBcGlSZXF1ZXN0LCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuXHJcbiAgaWYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgZXJyb3IuY29kZSA9ICdGT1JCSURERU4nO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUm9sZSh1c2VyUm9sZTogc3RyaW5nLCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIGFsbG93ZWRSb2xlcy5pbmNsdWRlcyh1c2VyUm9sZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhlbnRpY2F0ZWRVc2VyKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCxcclxuICBvcHRpb25zPzogeyByZXF1aXJlZFJvbGU/OiBzdHJpbmcgfCBzdHJpbmdbXSB9XHJcbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKG9wdGlvbnM/LnJlcXVpcmVkUm9sZSkge1xyXG4gICAgICBjb25zdCByb2xlcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5yZXF1aXJlZFJvbGUpID8gb3B0aW9ucy5yZXF1aXJlZFJvbGUgOiBbb3B0aW9ucy5yZXF1aXJlZFJvbGVdO1xyXG4gICAgICBpZiAoIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgICAgIGVycm9yLmNvZGUgPSAnRk9SQklEREVOJztcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJ3aXRoUmF0ZUxpbWl0IiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsImtleUdlbmVyYXRvciIsInJlcSIsImtleSIsIm5vdyIsIkRhdGUiLCJyZWNvcmQiLCJnZXQiLCJyZXNldFRpbWUiLCJzZXQiLCJjb3VudCIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiY29kZSIsImF1dGhlbnRpY2F0ZSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInJlcGxhY2UiLCJkYXRhIiwidXNlciIsImF1dGhFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwidXNlckRhdGEiLCJ1c2VyRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsImVtYWlsIiwicm9sZSIsInJlcXVpcmVSb2xlIiwiYWxsb3dlZFJvbGVzIiwiaW5jbHVkZXMiLCJjaGVja1JvbGUiLCJ1c2VyUm9sZSIsIndpdGhBdXRoIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJyZXMiLCJyZXF1aXJlZFJvbGUiLCJyb2xlcyIsIkFycmF5IiwiaXNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/error-handler.ts":
/*!*********************************************!*\
  !*** ./lib/api/middleware/error-handler.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nclass AuthenticationError extends Error {\n    constructor(message = \"Authentication required\"){\n        super(message);\n        this.statusCode = 401;\n        this.code = \"AUTHENTICATION_ERROR\";\n        this.name = \"AuthenticationError\";\n    }\n}\nclass ValidationError extends Error {\n    constructor(message = \"Invalid input data\"){\n        super(message);\n        this.statusCode = 400;\n        this.code = \"VALIDATION_ERROR\";\n        this.name = \"ValidationError\";\n    }\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            console.error(\"API Error:\", error);\n            const statusCode = error && typeof error === \"object\" && \"statusCode\" in error ? error.statusCode : 500;\n            const message = error instanceof Error ? error.message : error && typeof error === \"object\" && \"message\" in error ? error.message : \"Internal Server Error\";\n            const code = error && typeof error === \"object\" && \"code\" in error ? error.code : \"INTERNAL_SERVER_ERROR\";\n            // Ensure we haven't already sent a response\n            if (!res.writableEnded) {\n                const response = {\n                    success: false,\n                    error: {\n                        code,\n                        message,\n                        details:  true && error instanceof Error ? error.stack : undefined\n                    },\n                    timestamp: new Date().toISOString()\n                };\n                res.status(statusCode).json(response);\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpL21pZGRsZXdhcmUvZXJyb3ItaGFuZGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFZTyxNQUFNQSw0QkFBNEJDO0lBSXZDQyxZQUFZQyxVQUFrQix5QkFBeUIsQ0FBRTtRQUN2RCxLQUFLLENBQUNBO2FBSlJDLGFBQWE7YUFDYkMsT0FBTztRQUlMLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1DLHdCQUF3Qk47SUFJbkNDLFlBQVlDLFVBQWtCLG9CQUFvQixDQUFFO1FBQ2xELEtBQUssQ0FBQ0E7YUFKUkMsYUFBYTthQUNiQyxPQUFPO1FBSUwsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sU0FBU0UsaUJBQWlCQyxPQUF1QjtJQUN0RCxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsTUFBTUYsUUFBUUMsS0FBS0M7UUFDckIsRUFBRSxPQUFPQyxPQUFnQjtZQUN2QkMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1lBRTVCLE1BQU1SLGFBQWFRLFNBQVMsT0FBT0EsVUFBVSxZQUFZLGdCQUFnQkEsUUFBU0EsTUFBTVIsVUFBVSxHQUFjO1lBQ2hILE1BQU1ELFVBQVVTLGlCQUFpQlgsUUFBUVcsTUFBTVQsT0FBTyxHQUNuRFMsU0FBUyxPQUFPQSxVQUFVLFlBQVksYUFBYUEsUUFBUSxNQUErQlQsT0FBTyxHQUFHO1lBQ3ZHLE1BQU1FLE9BQU9PLFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLFFBQVNBLE1BQU1QLElBQUksR0FBYztZQUU5Riw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDTSxJQUFJRyxhQUFhLEVBQUU7Z0JBQ3RCLE1BQU1DLFdBQTZCO29CQUNqQ0MsU0FBUztvQkFDVEosT0FBTzt3QkFDTFA7d0JBQ0FGO3dCQUNBYyxTQUFTQyxLQUF5QixJQUFpQk4saUJBQWlCWCxRQUFRVyxNQUFNTyxLQUFLLEdBQUdDO29CQUM1RjtvQkFDQUMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztnQkFFQVosSUFBSWEsTUFBTSxDQUFDcEIsWUFBWXFCLElBQUksQ0FBQ1Y7WUFDOUI7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vbGliL2FwaS9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXIudHM/Njg4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlFcnJvclJlc3BvbnNlIHtcclxuICBzdWNjZXNzOiBmYWxzZTtcclxuICBlcnJvcjoge1xyXG4gICAgY29kZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZGV0YWlscz86IHVua25vd247XHJcbiAgfTtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMTtcclxuICBjb2RlID0gJ0FVVEhFTlRJQ0FUSU9OX0VSUk9SJztcclxuICBcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdBdXRoZW50aWNhdGlvbkVycm9yJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMDtcclxuICBjb2RlID0gJ1ZBTElEQVRJT05fRVJST1InO1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnZhbGlkIGlucHV0IGRhdGEnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdWYWxpZGF0aW9uRXJyb3InO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsZXIoaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzQ29kZScgaW4gZXJyb3IgPyAoZXJyb3Iuc3RhdHVzQ29kZSBhcyBudW1iZXIpIDogNTAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcclxuICAgICAgICAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IgPyAoZXJyb3IgYXMgeyBtZXNzYWdlOiBzdHJpbmcgfSkubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcclxuICAgICAgY29uc3QgY29kZSA9IGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ2NvZGUnIGluIGVycm9yID8gKGVycm9yLmNvZGUgYXMgc3RyaW5nKSA6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InO1xyXG5cclxuICAgICAgLy8gRW5zdXJlIHdlIGhhdmVuJ3QgYWxyZWFkeSBzZW50IGEgcmVzcG9uc2VcclxuICAgICAgaWYgKCFyZXMud3JpdGFibGVFbmRlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlFcnJvclJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgICBjb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwibmFtZSIsIlZhbGlkYXRpb25FcnJvciIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJjb25zb2xlIiwid3JpdGFibGVFbmRlZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJwcm9jZXNzIiwic3RhY2siLCJ1bmRlZmluZWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/error-handler.ts\n");

/***/ }),

/***/ "(api)/./lib/database-server.ts":
/*!********************************!*\
  !*** ./lib/database-server.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = \"https://hewrjnconmykfzggwhzg.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n}\nif (!supabaseServiceKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable\");\n}\n// Create a Supabase client with the service role key for admin operations\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRWhFLElBQUksQ0FBQ0wsYUFBYTtJQUNoQixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJLENBQUNGLG9CQUFvQjtJQUN2QixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSwwRUFBMEU7QUFDbkUsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FBQ0MsYUFBYUksb0JBQW9CO0lBQ3pFSSxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzP2NkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxuaWYgKCFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgd2l0aCB0aGUgc2VydmljZSByb2xlIGtleSBmb3IgYWRtaW4gb3BlcmF0aW9uc1xyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcclxuICB9XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database-server.ts\n");

/***/ }),

/***/ "(api)/./pages/api/admin/articles/index.ts":
/*!*******************************************!*\
  !*** ./pages/api/admin/articles/index.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\n/* harmony import */ var _lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/middleware/error-handler */ \"(api)/./lib/api/middleware/error-handler.ts\");\n/* harmony import */ var _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/api/middleware/auth */ \"(api)/./lib/api/middleware/auth.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__, zod__WEBPACK_IMPORTED_MODULE_3__]);\n([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__, zod__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n// Validation schemas\nconst articlesQuerySchema = zod__WEBPACK_IMPORTED_MODULE_3__.z.object({\n    search: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().max(100, \"Search term too long\").optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_3__.z.enum([\n        \"all\",\n        \"draft\",\n        \"pending_review\",\n        \"published\",\n        \"archived\"\n    ]).default(\"all\"),\n    page: zod__WEBPACK_IMPORTED_MODULE_3__.z.coerce.number().min(1).default(1)\n});\nconst articleCreateSchema = zod__WEBPACK_IMPORTED_MODULE_3__.z.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().min(1, \"Title is required\").max(255, \"Title must not exceed 255 characters\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().min(1, \"Content is required\"),\n    excerpt: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().max(500, \"Excerpt must not exceed 500 characters\").optional(),\n    featured_image: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().url(\"Invalid featured image URL\").optional().nullable(),\n    status: zod__WEBPACK_IMPORTED_MODULE_3__.z.enum([\n        \"draft\",\n        \"pending_review\",\n        \"published\"\n    ]).default(\"draft\"),\n    is_featured: zod__WEBPACK_IMPORTED_MODULE_3__.z.boolean().default(false),\n    featured_order: zod__WEBPACK_IMPORTED_MODULE_3__.z.number().min(0).default(0),\n    display_location: zod__WEBPACK_IMPORTED_MODULE_3__.z.enum([\n        \"homepage\",\n        \"category_page\",\n        \"both\",\n        \"none\"\n    ]).default(\"both\")\n});\n// Rate limiting: 30 requests per minute per admin\nconst rateLimitMiddleware = (0,_lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.withRateLimit)(30, 60 * 1000, (req)=>{\n    const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n    return token || req.socket.remoteAddress || \"unknown\";\n});\nasync function handler(req, res) {\n    try {\n        console.log(\"=== ADMIN ARTICLES API DEBUG ===\");\n        console.log(\"Method:\", req.method);\n        console.log(\"Headers:\", req.headers);\n        console.log(\"Query:\", req.query);\n        console.log(\"Body:\", req.body);\n        // Apply rate limiting\n        console.log(\"Applying rate limiting...\");\n        rateLimitMiddleware(req);\n        console.log(\"Rate limiting passed\");\n        // Authenticate user using admin client directly\n        console.log(\"Authenticating user...\");\n        const authHeader = req.headers.authorization;\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: \"No authorization token provided\",\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        // Verify token and get user\n        const { data: { user: authUser }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n        if (authError || !authUser) {\n            console.log(\"Auth failed:\", authError?.message);\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: \"Invalid or expired token\",\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Get user role from database\n        const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", authUser.id).single();\n        if (userError || !userData) {\n            console.log(\"User role fetch failed:\", userError?.message);\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: \"User not found\",\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        const user = {\n            id: authUser.id,\n            email: authUser.email,\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            role: userData.role\n        };\n        console.log(\"User authenticated:\", {\n            userId: user.id,\n            role: user.role\n        });\n        // GET - List articles\n        if (req.method === \"GET\") {\n            console.log(\"Processing GET request for articles...\");\n            // Authorize admin or editor access\n            if (![\n                \"admin\",\n                \"editor\"\n            ].includes(user.role)) {\n                console.log(\"Access denied - insufficient permissions:\", user.role);\n                return res.status(403).json({\n                    success: false,\n                    error: {\n                        code: \"INSUFFICIENT_PERMISSIONS\",\n                        message: \"Admin or editor access required\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Validate query parameters\n            console.log(\"Validating query parameters...\");\n            const validatedParams = articlesQuerySchema.parse(req.query);\n            const { search, status, page } = validatedParams;\n            console.log(\"Validated params:\", {\n                search,\n                status,\n                page\n            });\n            const pageNum = page;\n            const limit = 12;\n            const offset = (pageNum - 1) * limit;\n            console.log(\"Pagination:\", {\n                pageNum,\n                limit,\n                offset\n            });\n            console.log(\"Building database query...\");\n            let query = _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(`\r\n          *,\r\n          author:users(name, email),\r\n          category:categories(id, name, slug)\r\n        `, {\n                count: \"exact\"\n            }).order(\"created_at\", {\n                ascending: false\n            });\n            // Add search filter\n            if (search && typeof search === \"string\") {\n                console.log(\"Adding search filter:\", search);\n                query = query.or(`title.ilike.%${search}%,content.ilike.%${search}%,excerpt.ilike.%${search}%`);\n            }\n            // Add status filter\n            if (status !== \"all\") {\n                console.log(\"Adding status filter:\", status);\n                query = query.eq(\"status\", status);\n            }\n            // Apply pagination\n            console.log(\"Applying pagination range...\");\n            query = query.range(offset, offset + limit - 1);\n            console.log(\"Executing database query...\");\n            const { data, error, count } = await query;\n            console.log(\"Query result:\", {\n                dataCount: data?.length || 0,\n                error: error?.message,\n                count\n            });\n            if (error) {\n                console.error(\"Error fetching articles:\", error);\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"ARTICLES_FETCH_FAILED\",\n                        message: \"Failed to fetch articles\",\n                        details: error.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Log admin article list access\n            console.info(`Admin article list accessed by: ${user.id}`, {\n                filters: {\n                    search,\n                    status,\n                    page\n                },\n                timestamp: new Date().toISOString()\n            });\n            return res.status(200).json({\n                success: true,\n                data: {\n                    articles: data || [],\n                    pagination: {\n                        currentPage: pageNum,\n                        totalPages: count ? Math.ceil(count / limit) : 0,\n                        totalArticles: count || 0,\n                        hasNextPage: offset + limit < (count || 0),\n                        hasPreviousPage: pageNum > 1\n                    }\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // POST - Create article\n        if (req.method === \"POST\") {\n            // Authorize admin or editor access\n            if (![\n                \"admin\",\n                \"editor\"\n            ].includes(user.role)) {\n                return res.status(403).json({\n                    success: false,\n                    error: {\n                        code: \"INSUFFICIENT_PERMISSIONS\",\n                        message: \"Admin or editor access required to create articles\",\n                        details: null\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Validate input\n            articleCreateSchema.parse(req.body);\n            const { title, content, excerpt, featured_image, status, is_featured, featured_order, display_location } = req.body;\n            // Generate slug\n            const slug = title.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\");\n            const articleData = {\n                title,\n                slug,\n                content,\n                excerpt: excerpt || \"\",\n                featured_image: featured_image || null,\n                status,\n                is_featured: is_featured || false,\n                featured_order: featured_order || 0,\n                display_location: display_location || \"both\",\n                author_id: user.id,\n                published_at: status === \"published\" ? new Date().toISOString() : null\n            };\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const { data: article, error } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").insert(articleData).select(`\r\n          *,\r\n          author:users(name)\r\n        `).single();\n            if (error) {\n                console.error(\"Error creating article:\", error);\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        code: \"ARTICLE_CREATION_FAILED\",\n                        message: \"Failed to create article\",\n                        details: error.message\n                    },\n                    timestamp: new Date().toISOString()\n                });\n            }\n            // Log article creation\n            console.info(`Article created by admin/editor: ${user.id}`, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                articleId: article.id,\n                articleTitle: title,\n                status,\n                timestamp: new Date().toISOString()\n            });\n            return res.status(201).json({\n                success: true,\n                data: {\n                    article\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        return res.status(405).json({\n            success: false,\n            error: {\n                code: \"METHOD_NOT_ALLOWED\",\n                message: \"Only GET and POST methods are allowed\",\n                details: null\n            },\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Admin articles API error:\", error);\n        // Handle specific error types\n        if (error instanceof _lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__.AuthenticationError) {\n            return res.status(401).json({\n                success: false,\n                error: {\n                    code: \"UNAUTHORIZED\",\n                    message: error.message,\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Handle validation errors\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_3__.z.ZodError) {\n            return res.status(400).json({\n                success: false,\n                error: {\n                    code: \"VALIDATION_ERROR\",\n                    message: \"Invalid input parameters\",\n                    details: error.errors\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Handle database errors\n        if (error && typeof error === \"object\" && \"code\" in error) {\n            const dbError = error;\n            return res.status(500).json({\n                success: false,\n                error: {\n                    code: \"DATABASE_ERROR\",\n                    message: \"Database operation failed\",\n                    details: dbError.message\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Generic error\n        res.status(500).json({\n            success: false,\n            error: {\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"An unexpected error occurred while processing article request\",\n                details:  true ? error.message : 0\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n// Wrap with error handler middleware\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__.withErrorHandler)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vYXJ0aWNsZXMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFDc0Q7QUFDZ0I7QUFDRztBQUNmO0FBQ2xDO0FBRXhCLHFCQUFxQjtBQUNyQixNQUFNSyxzQkFBc0JELGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDbkNDLFFBQVFILGtDQUFDQSxDQUFDSSxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxLQUFLLHdCQUF3QkMsUUFBUTtJQUM1REMsUUFBUVAsa0NBQUNBLENBQUNRLElBQUksQ0FBQztRQUFDO1FBQU87UUFBUztRQUFrQjtRQUFhO0tBQVcsRUFBRUMsT0FBTyxDQUFDO0lBQ3BGQyxNQUFNVixrQ0FBQ0EsQ0FBQ1csTUFBTSxDQUFDQyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHSixPQUFPLENBQUM7QUFDekM7QUFFQSxNQUFNSyxzQkFBc0JkLGtDQUFDQSxDQUFDRSxNQUFNLENBQUM7SUFDbkNhLE9BQU9mLGtDQUFDQSxDQUFDSSxNQUFNLEdBQUdTLEdBQUcsQ0FBQyxHQUFHLHFCQUFxQlIsR0FBRyxDQUFDLEtBQUs7SUFDdkRXLFNBQVNoQixrQ0FBQ0EsQ0FBQ0ksTUFBTSxHQUFHUyxHQUFHLENBQUMsR0FBRztJQUMzQkksU0FBU2pCLGtDQUFDQSxDQUFDSSxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxLQUFLLDBDQUEwQ0MsUUFBUTtJQUMvRVksZ0JBQWdCbEIsa0NBQUNBLENBQUNJLE1BQU0sR0FBR2UsR0FBRyxDQUFDLDhCQUE4QmIsUUFBUSxHQUFHYyxRQUFRO0lBQ2hGYixRQUFRUCxrQ0FBQ0EsQ0FBQ1EsSUFBSSxDQUFDO1FBQUM7UUFBUztRQUFrQjtLQUFZLEVBQUVDLE9BQU8sQ0FBQztJQUNqRVksYUFBYXJCLGtDQUFDQSxDQUFDc0IsT0FBTyxHQUFHYixPQUFPLENBQUM7SUFDakNjLGdCQUFnQnZCLGtDQUFDQSxDQUFDWSxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHSixPQUFPLENBQUM7SUFD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QUNOQyxTQUFTO2dCQUNUQyxTQUFTd0QsS0FBeUIsR0FBZ0IsTUFBaUJ6RCxPQUFPLEdBQUcsQ0FBSTtZQUNuRjtZQUNBRSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDbkM7SUFDRjtBQUNGO0FBRUEscUNBQXFDO0FBQ3JDLGlFQUFlckQsbUZBQWdCQSxDQUFDb0MsUUFBUUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9wYWdlcy9hcGkvYWRtaW4vYXJ0aWNsZXMvaW5kZXgudHM/MjZjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IHN1cGFiYXNlQWRtaW4gfSBmcm9tICdAL2xpYi9kYXRhYmFzZS1zZXJ2ZXInO1xyXG5pbXBvcnQgeyB3aXRoRXJyb3JIYW5kbGVyIH0gZnJvbSAnQC9saWIvYXBpL21pZGRsZXdhcmUvZXJyb3ItaGFuZGxlcic7XHJcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uRXJyb3IgfSBmcm9tICdAL2xpYi9hcGkvbWlkZGxld2FyZS9lcnJvci1oYW5kbGVyJztcclxuaW1wb3J0IHsgd2l0aFJhdGVMaW1pdCB9IGZyb20gJ0AvbGliL2FwaS9taWRkbGV3YXJlL2F1dGgnO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuXHJcbi8vIFZhbGlkYXRpb24gc2NoZW1hc1xyXG5jb25zdCBhcnRpY2xlc1F1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIHNlYXJjaDogei5zdHJpbmcoKS5tYXgoMTAwLCAnU2VhcmNoIHRlcm0gdG9vIGxvbmcnKS5vcHRpb25hbCgpLFxyXG4gIHN0YXR1czogei5lbnVtKFsnYWxsJywgJ2RyYWZ0JywgJ3BlbmRpbmdfcmV2aWV3JywgJ3B1Ymxpc2hlZCcsICdhcmNoaXZlZCddKS5kZWZhdWx0KCdhbGwnKSxcclxuICBwYWdlOiB6LmNvZXJjZS5udW1iZXIoKS5taW4oMSkuZGVmYXVsdCgxKVxyXG59KTtcclxuXHJcbmNvbnN0IGFydGljbGVDcmVhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgdGl0bGU6IHouc3RyaW5nKCkubWluKDEsICdUaXRsZSBpcyByZXF1aXJlZCcpLm1heCgyNTUsICdUaXRsZSBtdXN0IG5vdCBleGNlZWQgMjU1IGNoYXJhY3RlcnMnKSxcclxuICBjb250ZW50OiB6LnN0cmluZygpLm1pbigxLCAnQ29udGVudCBpcyByZXF1aXJlZCcpLFxyXG4gIGV4Y2VycHQ6IHouc3RyaW5nKCkubWF4KDUwMCwgJ0V4Y2VycHQgbXVzdCBub3QgZXhjZWVkIDUwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcclxuICBmZWF0dXJlZF9pbWFnZTogei5zdHJpbmcoKS51cmwoJ0ludmFsaWQgZmVhdHVyZWQgaW1hZ2UgVVJMJykub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxyXG4gIHN0YXR1czogei5lbnVtKFsnZHJhZnQnLCAncGVuZGluZ19yZXZpZXcnLCAncHVibGlzaGVkJ10pLmRlZmF1bHQoJ2RyYWZ0JyksXHJcbiAgaXNfZmVhdHVyZWQ6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxyXG4gIGZlYXR1cmVkX29yZGVyOiB6Lm51bWJlcigpLm1pbigwKS5kZWZhdWx0KDApLFxyXG4gIGRpc3BsYXlfbG9jYXRpb246IHouZW51bShbJ2hvbWVwYWdlJywgJ2NhdGVnb3J5X3BhZ2UnLCAnYm90aCcsICdub25lJ10pLmRlZmF1bHQoJ2JvdGgnKVxyXG59KTtcclxuXHJcbi8vIFJhdGUgbGltaXRpbmc6IDMwIHJlcXVlc3RzIHBlciBtaW51dGUgcGVyIGFkbWluXHJcbmNvbnN0IHJhdGVMaW1pdE1pZGRsZXdhcmUgPSB3aXRoUmF0ZUxpbWl0KDMwLCA2MCAqIDEwMDAsIChyZXEpID0+IHtcclxuICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJyk7XHJcbiAgcmV0dXJuIHRva2VuIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzcyB8fCAndW5rbm93bic7XHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnPT09IEFETUlOIEFSVElDTEVTIEFQSSBERUJVRyA9PT0nKTtcclxuICAgIGNvbnNvbGUubG9nKCdNZXRob2Q6JywgcmVxLm1ldGhvZCk7XHJcbiAgICBjb25zb2xlLmxvZygnSGVhZGVyczonLCByZXEuaGVhZGVycyk7XHJcbiAgICBjb25zb2xlLmxvZygnUXVlcnk6JywgcmVxLnF1ZXJ5KTtcclxuICAgIGNvbnNvbGUubG9nKCdCb2R5OicsIHJlcS5ib2R5KTtcclxuICAgIFxyXG4gICAgLy8gQXBwbHkgcmF0ZSBsaW1pdGluZ1xyXG4gICAgY29uc29sZS5sb2coJ0FwcGx5aW5nIHJhdGUgbGltaXRpbmcuLi4nKTtcclxuICAgIHJhdGVMaW1pdE1pZGRsZXdhcmUocmVxKTtcclxuICAgIGNvbnNvbGUubG9nKCdSYXRlIGxpbWl0aW5nIHBhc3NlZCcpO1xyXG5cclxuICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyIHVzaW5nIGFkbWluIGNsaWVudCBkaXJlY3RseVxyXG4gICAgY29uc29sZS5sb2coJ0F1dGhlbnRpY2F0aW5nIHVzZXIuLi4nKTtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICBjb2RlOiAnVU5BVVRIT1JJWkVEJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdObyBhdXRob3JpemF0aW9uIHRva2VuIHByb3ZpZGVkJyxcclxuICAgICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpO1xyXG4gICAgXHJcbiAgICAvLyBWZXJpZnkgdG9rZW4gYW5kIGdldCB1c2VyXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogYXV0aFVzZXIgfSwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmdldFVzZXIodG9rZW4pO1xyXG4gICAgXHJcbiAgICBpZiAoYXV0aEVycm9yIHx8ICFhdXRoVXNlcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBmYWlsZWQ6JywgYXV0aEVycm9yPy5tZXNzYWdlKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvciBleHBpcmVkIHRva2VuJyxcclxuICAgICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB1c2VyIHJvbGUgZnJvbSBkYXRhYmFzZVxyXG4gICAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAuc2VsZWN0KCdyb2xlJylcclxuICAgICAgLmVxKCdpZCcsIGF1dGhVc2VyLmlkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKHVzZXJFcnJvciB8fCAhdXNlckRhdGEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXIgcm9sZSBmZXRjaCBmYWlsZWQ6JywgdXNlckVycm9yPy5tZXNzYWdlKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgY29kZTogJ1VOQVVUSE9SSVpFRCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBub3QgZm91bmQnLFxyXG4gICAgICAgICAgZGV0YWlsczogbnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgaWQ6IGF1dGhVc2VyLmlkLFxyXG4gICAgICBlbWFpbDogYXV0aFVzZXIuZW1haWwsXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgIHJvbGU6ICh1c2VyRGF0YSBhcyBhbnkpLnJvbGVcclxuICAgIH07XHJcbiAgICBjb25zb2xlLmxvZygnVXNlciBhdXRoZW50aWNhdGVkOicsIHsgdXNlcklkOiB1c2VyLmlkLCByb2xlOiB1c2VyLnJvbGUgfSk7XHJcblxyXG4gICAgLy8gR0VUIC0gTGlzdCBhcnRpY2xlc1xyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIEdFVCByZXF1ZXN0IGZvciBhcnRpY2xlcy4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8gQXV0aG9yaXplIGFkbWluIG9yIGVkaXRvciBhY2Nlc3NcclxuICAgICAgaWYgKCFbJ2FkbWluJywgJ2VkaXRvciddLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWNjZXNzIGRlbmllZCAtIGluc3VmZmljaWVudCBwZXJtaXNzaW9uczonLCB1c2VyLnJvbGUpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICAgIGNvZGU6ICdJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlMnLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnQWRtaW4gb3IgZWRpdG9yIGFjY2VzcyByZXF1aXJlZCcsXHJcbiAgICAgICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSBxdWVyeSBwYXJhbWV0ZXJzXHJcbiAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW5nIHF1ZXJ5IHBhcmFtZXRlcnMuLi4nKTtcclxuICAgICAgY29uc3QgdmFsaWRhdGVkUGFyYW1zID0gYXJ0aWNsZXNRdWVyeVNjaGVtYS5wYXJzZShyZXEucXVlcnkpO1xyXG4gICAgICBjb25zdCB7IHNlYXJjaCwgc3RhdHVzLCBwYWdlIH0gPSB2YWxpZGF0ZWRQYXJhbXM7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0ZWQgcGFyYW1zOicsIHsgc2VhcmNoLCBzdGF0dXMsIHBhZ2UgfSk7XHJcblxyXG4gICAgICBjb25zdCBwYWdlTnVtID0gcGFnZTtcclxuICAgICAgY29uc3QgbGltaXQgPSAxMjtcclxuICAgICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2VOdW0gLSAxKSAqIGxpbWl0O1xyXG4gICAgICBjb25zb2xlLmxvZygnUGFnaW5hdGlvbjonLCB7IHBhZ2VOdW0sIGxpbWl0LCBvZmZzZXQgfSk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnQnVpbGRpbmcgZGF0YWJhc2UgcXVlcnkuLi4nKTtcclxuICAgICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VBZG1pblxyXG4gICAgICAgIC5mcm9tKCdhcnRpY2xlcycpXHJcbiAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICAqLFxyXG4gICAgICAgICAgYXV0aG9yOnVzZXJzKG5hbWUsIGVtYWlsKSxcclxuICAgICAgICAgIGNhdGVnb3J5OmNhdGVnb3JpZXMoaWQsIG5hbWUsIHNsdWcpXHJcbiAgICAgICAgYCwgeyBjb3VudDogJ2V4YWN0JyB9KVxyXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgIC8vIEFkZCBzZWFyY2ggZmlsdGVyXHJcbiAgICAgIGlmIChzZWFyY2ggJiYgdHlwZW9mIHNlYXJjaCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIHNlYXJjaCBmaWx0ZXI6Jywgc2VhcmNoKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGB0aXRsZS5pbGlrZS4lJHtzZWFyY2h9JSxjb250ZW50LmlsaWtlLiUke3NlYXJjaH0lLGV4Y2VycHQuaWxpa2UuJSR7c2VhcmNofSVgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWRkIHN0YXR1cyBmaWx0ZXJcclxuICAgICAgaWYgKHN0YXR1cyAhPT0gJ2FsbCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIHN0YXR1cyBmaWx0ZXI6Jywgc3RhdHVzKTtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzdGF0dXMnLCBzdGF0dXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBBcHBseSBwYWdpbmF0aW9uXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBcHBseWluZyBwYWdpbmF0aW9uIHJhbmdlLi4uJyk7XHJcbiAgICAgIHF1ZXJ5ID0gcXVlcnkucmFuZ2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCAtIDEpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBkYXRhYmFzZSBxdWVyeS4uLicpO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdRdWVyeSByZXN1bHQ6JywgeyBkYXRhQ291bnQ6IGRhdGE/Lmxlbmd0aCB8fCAwLCBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UsIGNvdW50IH0pO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYXJ0aWNsZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICAgIGNvZGU6ICdBUlRJQ0xFU19GRVRDSF9GQUlMRUQnLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGFydGljbGVzJyxcclxuICAgICAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIExvZyBhZG1pbiBhcnRpY2xlIGxpc3QgYWNjZXNzXHJcbiAgICAgIGNvbnNvbGUuaW5mbyhgQWRtaW4gYXJ0aWNsZSBsaXN0IGFjY2Vzc2VkIGJ5OiAke3VzZXIuaWR9YCwge1xyXG4gICAgICAgIGZpbHRlcnM6IHsgc2VhcmNoLCBzdGF0dXMsIHBhZ2UgfSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBhcnRpY2xlczogZGF0YSB8fCBbXSxcclxuICAgICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IHBhZ2VOdW0sXHJcbiAgICAgICAgICAgIHRvdGFsUGFnZXM6IGNvdW50ID8gTWF0aC5jZWlsKGNvdW50IC8gbGltaXQpIDogMCxcclxuICAgICAgICAgICAgdG90YWxBcnRpY2xlczogY291bnQgfHwgMCxcclxuICAgICAgICAgICAgaGFzTmV4dFBhZ2U6IChvZmZzZXQgKyBsaW1pdCkgPCAoY291bnQgfHwgMCksXHJcbiAgICAgICAgICAgIGhhc1ByZXZpb3VzUGFnZTogcGFnZU51bSA+IDFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBPU1QgLSBDcmVhdGUgYXJ0aWNsZVxyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAvLyBBdXRob3JpemUgYWRtaW4gb3IgZWRpdG9yIGFjY2Vzc1xyXG4gICAgICBpZiAoIVsnYWRtaW4nLCAnZWRpdG9yJ10uaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICAgIGNvZGU6ICdJTlNVRkZJQ0lFTlRfUEVSTUlTU0lPTlMnLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnQWRtaW4gb3IgZWRpdG9yIGFjY2VzcyByZXF1aXJlZCB0byBjcmVhdGUgYXJ0aWNsZXMnLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBudWxsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgYXJ0aWNsZUNyZWF0ZVNjaGVtYS5wYXJzZShyZXEuYm9keSk7XHJcbiAgICAgIGNvbnN0IHsgdGl0bGUsIGNvbnRlbnQsIGV4Y2VycHQsIGZlYXR1cmVkX2ltYWdlLCBzdGF0dXMsIGlzX2ZlYXR1cmVkLCBmZWF0dXJlZF9vcmRlciwgZGlzcGxheV9sb2NhdGlvbiB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgICAvLyBHZW5lcmF0ZSBzbHVnXHJcbiAgICAgIGNvbnN0IHNsdWcgPSB0aXRsZVxyXG4gICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKVxyXG4gICAgICAgIC5yZXBsYWNlKC8oXi18LSQpL2csICcnKTtcclxuXHJcbiAgICAgIGNvbnN0IGFydGljbGVEYXRhID0ge1xyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIHNsdWcsXHJcbiAgICAgICAgY29udGVudCxcclxuICAgICAgICBleGNlcnB0OiBleGNlcnB0IHx8ICcnLFxyXG4gICAgICAgIGZlYXR1cmVkX2ltYWdlOiBmZWF0dXJlZF9pbWFnZSB8fCBudWxsLFxyXG4gICAgICAgIHN0YXR1cyxcclxuICAgICAgICBpc19mZWF0dXJlZDogaXNfZmVhdHVyZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgZmVhdHVyZWRfb3JkZXI6IGZlYXR1cmVkX29yZGVyIHx8IDAsXHJcbiAgICAgICAgZGlzcGxheV9sb2NhdGlvbjogZGlzcGxheV9sb2NhdGlvbiB8fCAnYm90aCcsXHJcbiAgICAgICAgYXV0aG9yX2lkOiB1c2VyLmlkLFxyXG4gICAgICAgIHB1Ymxpc2hlZF9hdDogc3RhdHVzID09PSAncHVibGlzaGVkJyA/IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSA6IG51bGwsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICBjb25zdCB7IGRhdGE6IGFydGljbGUsIGVycm9yIH0gPSBhd2FpdCAoc3VwYWJhc2VBZG1pbiBhcyBhbnkpXHJcbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcclxuICAgICAgICAuaW5zZXJ0KGFydGljbGVEYXRhKVxyXG4gICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgKixcclxuICAgICAgICAgIGF1dGhvcjp1c2VycyhuYW1lKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYXJ0aWNsZTonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IHtcclxuICAgICAgICAgICAgY29kZTogJ0FSVElDTEVfQ1JFQVRJT05fRkFJTEVEJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgYXJ0aWNsZScsXHJcbiAgICAgICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBMb2cgYXJ0aWNsZSBjcmVhdGlvblxyXG4gICAgICBjb25zb2xlLmluZm8oYEFydGljbGUgY3JlYXRlZCBieSBhZG1pbi9lZGl0b3I6ICR7dXNlci5pZH1gLCB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBhcnRpY2xlSWQ6IChhcnRpY2xlIGFzIGFueSkuaWQsXHJcbiAgICAgICAgYXJ0aWNsZVRpdGxlOiB0aXRsZSxcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YTogeyBhcnRpY2xlIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgY29kZTogJ01FVEhPRF9OT1RfQUxMT1dFRCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ09ubHkgR0VUIGFuZCBQT1NUIG1ldGhvZHMgYXJlIGFsbG93ZWQnLFxyXG4gICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQWRtaW4gYXJ0aWNsZXMgQVBJIGVycm9yOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIGVycm9yIHR5cGVzXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBdXRoZW50aWNhdGlvbkVycm9yKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IHtcclxuICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnNcclxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgcGFyYW1ldGVycycsXHJcbiAgICAgICAgICBkZXRhaWxzOiBlcnJvci5lcnJvcnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBIYW5kbGUgZGF0YWJhc2UgZXJyb3JzXHJcbiAgICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnY29kZScgaW4gZXJyb3IpIHtcclxuICAgICAgY29uc3QgZGJFcnJvciA9IGVycm9yIGFzIHsgY29kZTogc3RyaW5nOyBtZXNzYWdlOiBzdHJpbmc7IFtrZXk6IHN0cmluZ106IHVua25vd24gfTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgY29kZTogJ0RBVEFCQVNFX0VSUk9SJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyxcclxuICAgICAgICAgIGRldGFpbHM6IGRiRXJyb3IubWVzc2FnZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEdlbmVyaWMgZXJyb3JcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgd2hpbGUgcHJvY2Vzc2luZyBhcnRpY2xlIHJlcXVlc3QnLFxyXG4gICAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlIDogbnVsbFxyXG4gICAgICB9LFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBXcmFwIHdpdGggZXJyb3IgaGFuZGxlciBtaWRkbGV3YXJlXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhFcnJvckhhbmRsZXIoaGFuZGxlcik7XHJcblxyXG4iXSwibmFtZXMiOlsic3VwYWJhc2VBZG1pbiIsIndpdGhFcnJvckhhbmRsZXIiLCJBdXRoZW50aWNhdGlvbkVycm9yIiwid2l0aFJhdGVMaW1pdCIsInoiLCJhcnRpY2xlc1F1ZXJ5U2NoZW1hIiwib2JqZWN0Iiwic2VhcmNoIiwic3RyaW5nIiwibWF4Iiwib3B0aW9uYWwiLCJzdGF0dXMiLCJlbnVtIiwiZGVmYXVsdCIsInBhZ2UiLCJjb2VyY2UiLCJudW1iZXIiLCJtaW4iLCJhcnRpY2xlQ3JlYXRlU2NoZW1hIiwidGl0bGUiLCJjb250ZW50IiwiZXhjZXJwdCIsImZlYXR1cmVkX2ltYWdlIiwidXJsIiwibnVsbGFibGUiLCJpc19mZWF0dXJlZCIsImJvb2xlYW4iLCJmZWF0dXJlZF9vcmRlciIsImRpc3BsYXlfbG9jYXRpb24iLCJyYXRlTGltaXRNaWRkbGV3YXJlIiwicmVxIiwidG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInJlcGxhY2UiLCJzb2NrZXQiLCJyZW1vdGVBZGRyZXNzIiwiaGFuZGxlciIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJxdWVyeSIsImJvZHkiLCJhdXRoSGVhZGVyIiwic3RhcnRzV2l0aCIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImRldGFpbHMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRhIiwidXNlciIsImF1dGhVc2VyIiwiYXV0aEVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJ1c2VyRGF0YSIsInVzZXJFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwiZW1haWwiLCJyb2xlIiwidXNlcklkIiwiaW5jbHVkZXMiLCJ2YWxpZGF0ZWRQYXJhbXMiLCJwYXJzZSIsInBhZ2VOdW0iLCJsaW1pdCIsIm9mZnNldCIsImNvdW50Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJvciIsInJhbmdlIiwiZGF0YUNvdW50IiwibGVuZ3RoIiwiaW5mbyIsImZpbHRlcnMiLCJhcnRpY2xlcyIsInBhZ2luYXRpb24iLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInRvdGFsQXJ0aWNsZXMiLCJoYXNOZXh0UGFnZSIsImhhc1ByZXZpb3VzUGFnZSIsInNsdWciLCJ0b0xvd2VyQ2FzZSIsImFydGljbGVEYXRhIiwiYXV0aG9yX2lkIiwicHVibGlzaGVkX2F0IiwiYXJ0aWNsZSIsImluc2VydCIsImFydGljbGVJZCIsImFydGljbGVUaXRsZSIsIlpvZEVycm9yIiwiZXJyb3JzIiwiZGJFcnJvciIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/articles/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8"], () => (__webpack_exec__("(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Farticles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Carticles%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();