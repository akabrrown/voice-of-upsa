"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/dashboard-stats";
exports.ids = ["pages/api/admin/dashboard-stats"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fdashboard-stats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cdashboard-stats.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fdashboard-stats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cdashboard-stats.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\dashboard-stats.ts */ \"(api)/./pages/api/admin/dashboard-stats.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/dashboard-stats\",\n        pathname: \"/api/admin/dashboard-stats\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_dashboard_stats_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zM19AYmFiZWwrY29yZUA3Ll9jNzk3NWYyZWUyY2VjZmY2MGVlMDU1ZTFmMWYzMDNhOC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGZGFzaGJvYXJkLXN0YXRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNhZG1pbiU1Q2Rhc2hib2FyZC1zdGF0cy50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNvRTtBQUNwRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvPzRjNTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhZG1pblxcXFxkYXNoYm9hcmQtc3RhdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9kYXNoYm9hcmQtc3RhdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9kYXNoYm9hcmQtc3RhdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fdashboard-stats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cdashboard-stats.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/auth.ts":
/*!************************************!*\
  !*** ./lib/api/middleware/auth.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticate: () => (/* binding */ authenticate),\n/* harmony export */   checkRole: () => (/* binding */ checkRole),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   withAuth: () => (/* binding */ withAuth),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Simple in-memory rate limiter (for production, use Redis or similar)\nconst rateLimitStore = new Map();\nfunction withRateLimit(maxRequests, windowMs, keyGenerator) {\n    return (req)=>{\n        const key = keyGenerator(req);\n        const now = Date.now();\n        const record = rateLimitStore.get(key);\n        if (!record || now > record.resetTime) {\n            rateLimitStore.set(key, {\n                count: 1,\n                resetTime: now + windowMs\n            });\n            return;\n        }\n        if (record.count >= maxRequests) {\n            const error = new Error(\"Too many requests\");\n            error.statusCode = 429;\n            error.code = \"RATE_LIMIT_EXCEEDED\";\n            throw error;\n        }\n        record.count++;\n    };\n}\nasync function authenticate(req) {\n    const authHeader = req.headers.authorization;\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        const error = new Error(\"No authorization token provided\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    const token = authHeader.replace(\"Bearer \", \"\");\n    // Verify token with Supabase\n    const { data: { user }, error: authError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.auth.getUser(token);\n    if (authError || !user) {\n        const error = new Error(\"Invalid or expired token\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    // Get user role from database\n    const { data: userData, error: userError } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"role\").eq(\"id\", user.id).single();\n    if (userError || !userData) {\n        const error = new Error(\"User not found in database\");\n        error.statusCode = 401;\n        error.code = \"UNAUTHORIZED\";\n        throw error;\n    }\n    return {\n        id: user.id,\n        email: user.email,\n        role: userData.role || \"user\"\n    };\n}\nasync function requireRole(req, allowedRoles) {\n    const user = await authenticate(req);\n    if (!allowedRoles.includes(user.role)) {\n        const error = new Error(\"Insufficient permissions\");\n        error.statusCode = 403;\n        error.code = \"FORBIDDEN\";\n        throw error;\n    }\n    return user;\n}\nfunction checkRole(userRole, allowedRoles) {\n    return allowedRoles.includes(userRole);\n}\nfunction withAuth(handler, options) {\n    return async (req, res)=>{\n        const user = await authenticate(req);\n        if (options?.requiredRole) {\n            const roles = Array.isArray(options.requiredRole) ? options.requiredRole : [\n                options.requiredRole\n            ];\n            if (!roles.includes(user.role)) {\n                const error = new Error(\"Insufficient permissions\");\n                error.statusCode = 403;\n                error.code = \"FORBIDDEN\";\n                throw error;\n            }\n        }\n        return handler(req, res, user);\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJeUMsU0FBU0UsY0FBYztZQUN6QixNQUFNQyxRQUFRQyxNQUFNQyxPQUFPLENBQUNMLFFBQVFFLFlBQVksSUFBSUYsUUFBUUUsWUFBWSxHQUFHO2dCQUFDRixRQUFRRSxZQUFZO2FBQUM7WUFDakcsSUFBSSxDQUFDQyxNQUFNUixRQUFRLENBQUNmLEtBQUtZLElBQUksR0FBRztnQkFDOUIsTUFBTXhCLFFBQVEsSUFBSUMsTUFBTTtnQkFDeEJELE1BQU1FLFVBQVUsR0FBRztnQkFDbkJGLE1BQU1HLElBQUksR0FBRztnQkFDYixNQUFNSDtZQUNSO1FBQ0Y7UUFFQSxPQUFPK0IsUUFBUXhDLEtBQUswQyxLQUFLckI7SUFDM0I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvYXBpL21pZGRsZXdhcmUvYXV0aC50cz8wM2MxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2RhdGFiYXNlLXNlcnZlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0ZWRVc2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsPzogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxufVxyXG5cclxuLy8gU2ltcGxlIGluLW1lbW9yeSByYXRlIGxpbWl0ZXIgKGZvciBwcm9kdWN0aW9uLCB1c2UgUmVkaXMgb3Igc2ltaWxhcilcclxuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldFRpbWU6IG51bWJlciB9PigpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhSYXRlTGltaXQoXHJcbiAgbWF4UmVxdWVzdHM6IG51bWJlcixcclxuICB3aW5kb3dNczogbnVtYmVyLFxyXG4gIGtleUdlbmVyYXRvcjogKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHN0cmluZ1xyXG4pIHtcclxuICByZXR1cm4gKHJlcTogTmV4dEFwaVJlcXVlc3QpID0+IHtcclxuICAgIGNvbnN0IGtleSA9IGtleUdlbmVyYXRvcihyZXEpO1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChrZXkpO1xyXG5cclxuICAgIGlmICghcmVjb3JkIHx8IG5vdyA+IHJlY29yZC5yZXNldFRpbWUpIHtcclxuICAgICAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgeyBjb3VudDogMSwgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZWNvcmQuY291bnQgPj0gbWF4UmVxdWVzdHMpIHtcclxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1RvbyBtYW55IHJlcXVlc3RzJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQyOTtcclxuICAgICAgZXJyb3IuY29kZSA9ICdSQVRFX0xJTUlUX0VYQ0VFREVEJztcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgcmVjb3JkLmNvdW50Kys7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShyZXE6IE5leHRBcGlSZXF1ZXN0KTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG5cclxuICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm8gYXV0aG9yaXphdGlvbiB0b2tlbiBwcm92aWRlZCcpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAxO1xyXG4gICAgZXJyb3IuY29kZSA9ICdVTkFVVEhPUklaRUQnO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuXHJcbiAgLy8gVmVyaWZ5IHRva2VuIHdpdGggU3VwYWJhc2VcclxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmF1dGguZ2V0VXNlcih0b2tlbik7XHJcblxyXG4gIGlmIChhdXRoRXJyb3IgfHwgIXVzZXIpIHtcclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHVzZXIgcm9sZSBmcm9tIGRhdGFiYXNlXHJcbiAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgLmZyb20oJ3VzZXJzJylcclxuICAgIC5zZWxlY3QoJ3JvbGUnKVxyXG4gICAgLmVxKCdpZCcsIHVzZXIuaWQpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmICh1c2VyRXJyb3IgfHwgIXVzZXJEYXRhKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2UnKSBhcyBFcnJvciAmIHsgc3RhdHVzQ29kZT86IG51bWJlcjsgY29kZT86IHN0cmluZyB9O1xyXG4gICAgZXJyb3Iuc3RhdHVzQ29kZSA9IDQwMTtcclxuICAgIGVycm9yLmNvZGUgPSAnVU5BVVRIT1JJWkVEJztcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8ICd1c2VyJ1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlUm9sZShyZXE6IE5leHRBcGlSZXF1ZXN0LCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxBdXRoZW50aWNhdGVkVXNlcj4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuXHJcbiAgaWYgKCFhbGxvd2VkUm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xyXG4gICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycpIGFzIEVycm9yICYgeyBzdGF0dXNDb2RlPzogbnVtYmVyOyBjb2RlPzogc3RyaW5nIH07XHJcbiAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgZXJyb3IuY29kZSA9ICdGT1JCSURERU4nO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUm9sZSh1c2VyUm9sZTogc3RyaW5nLCBhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIGFsbG93ZWRSb2xlcy5pbmNsdWRlcyh1c2VyUm9sZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aChcclxuICBoYW5kbGVyOiAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHVzZXI6IEF1dGhlbnRpY2F0ZWRVc2VyKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCxcclxuICBvcHRpb25zPzogeyByZXF1aXJlZFJvbGU/OiBzdHJpbmcgfCBzdHJpbmdbXSB9XHJcbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGUocmVxKTtcclxuICAgIFxyXG4gICAgaWYgKG9wdGlvbnM/LnJlcXVpcmVkUm9sZSkge1xyXG4gICAgICBjb25zdCByb2xlcyA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5yZXF1aXJlZFJvbGUpID8gb3B0aW9ucy5yZXF1aXJlZFJvbGUgOiBbb3B0aW9ucy5yZXF1aXJlZFJvbGVdO1xyXG4gICAgICBpZiAoIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJykgYXMgRXJyb3IgJiB7IHN0YXR1c0NvZGU/OiBudW1iZXI7IGNvZGU/OiBzdHJpbmcgfTtcclxuICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gNDAzO1xyXG4gICAgICAgIGVycm9yLmNvZGUgPSAnRk9SQklEREVOJztcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzLCB1c2VyKTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZUFkbWluIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJ3aXRoUmF0ZUxpbWl0IiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsImtleUdlbmVyYXRvciIsInJlcSIsImtleSIsIm5vdyIsIkRhdGUiLCJyZWNvcmQiLCJnZXQiLCJyZXNldFRpbWUiLCJzZXQiLCJjb3VudCIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiY29kZSIsImF1dGhlbnRpY2F0ZSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJ0b2tlbiIsInJlcGxhY2UiLCJkYXRhIiwidXNlciIsImF1dGhFcnJvciIsImF1dGgiLCJnZXRVc2VyIiwidXNlckRhdGEiLCJ1c2VyRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsImVtYWlsIiwicm9sZSIsInJlcXVpcmVSb2xlIiwiYWxsb3dlZFJvbGVzIiwiaW5jbHVkZXMiLCJjaGVja1JvbGUiLCJ1c2VyUm9sZSIsIndpdGhBdXRoIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJyZXMiLCJyZXF1aXJlZFJvbGUiLCJyb2xlcyIsIkFycmF5IiwiaXNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/auth.ts\n");

/***/ }),

/***/ "(api)/./lib/api/middleware/error-handler.ts":
/*!*********************************************!*\
  !*** ./lib/api/middleware/error-handler.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   withErrorHandler: () => (/* binding */ withErrorHandler)\n/* harmony export */ });\nclass AuthenticationError extends Error {\n    constructor(message = \"Authentication required\"){\n        super(message);\n        this.statusCode = 401;\n        this.code = \"AUTHENTICATION_ERROR\";\n        this.name = \"AuthenticationError\";\n    }\n}\nclass ValidationError extends Error {\n    constructor(message = \"Invalid input data\"){\n        super(message);\n        this.statusCode = 400;\n        this.code = \"VALIDATION_ERROR\";\n        this.name = \"ValidationError\";\n    }\n}\nfunction withErrorHandler(handler) {\n    return async (req, res)=>{\n        try {\n            await handler(req, res);\n        } catch (error) {\n            console.error(\"API Error:\", error);\n            const statusCode = error && typeof error === \"object\" && \"statusCode\" in error ? error.statusCode : 500;\n            const message = error instanceof Error ? error.message : error && typeof error === \"object\" && \"message\" in error ? error.message : \"Internal Server Error\";\n            const code = error && typeof error === \"object\" && \"code\" in error ? error.code : \"INTERNAL_SERVER_ERROR\";\n            // Ensure we haven't already sent a response\n            if (!res.writableEnded) {\n                const response = {\n                    success: false,\n                    error: {\n                        code,\n                        message,\n                        details:  true && error instanceof Error ? error.stack : undefined\n                    },\n                    timestamp: new Date().toISOString()\n                };\n                res.status(statusCode).json(response);\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYXBpL21pZGRsZXdhcmUvZXJyb3ItaGFuZGxlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFZTyxNQUFNQSw0QkFBNEJDO0lBSXZDQyxZQUFZQyxVQUFrQix5QkFBeUIsQ0FBRTtRQUN2RCxLQUFLLENBQUNBO2FBSlJDLGFBQWE7YUFDYkMsT0FBTztRQUlMLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1DLHdCQUF3Qk47SUFJbkNDLFlBQVlDLFVBQWtCLG9CQUFvQixDQUFFO1FBQ2xELEtBQUssQ0FBQ0E7YUFKUkMsYUFBYTthQUNiQyxPQUFPO1FBSUwsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sU0FBU0UsaUJBQWlCQyxPQUF1QjtJQUN0RCxPQUFPLE9BQU9DLEtBQXFCQztRQUNqQyxJQUFJO1lBQ0YsTUFBTUYsUUFBUUMsS0FBS0M7UUFDckIsRUFBRSxPQUFPQyxPQUFnQjtZQUN2QkMsUUFBUUQsS0FBSyxDQUFDLGNBQWNBO1lBRTVCLE1BQU1SLGFBQWFRLFNBQVMsT0FBT0EsVUFBVSxZQUFZLGdCQUFnQkEsUUFBU0EsTUFBTVIsVUFBVSxHQUFjO1lBQ2hILE1BQU1ELFVBQVVTLGlCQUFpQlgsUUFBUVcsTUFBTVQsT0FBTyxHQUNuRFMsU0FBUyxPQUFPQSxVQUFVLFlBQVksYUFBYUEsUUFBUSxNQUErQlQsT0FBTyxHQUFHO1lBQ3ZHLE1BQU1FLE9BQU9PLFNBQVMsT0FBT0EsVUFBVSxZQUFZLFVBQVVBLFFBQVNBLE1BQU1QLElBQUksR0FBYztZQUU5Riw0Q0FBNEM7WUFDNUMsSUFBSSxDQUFDTSxJQUFJRyxhQUFhLEVBQUU7Z0JBQ3RCLE1BQU1DLFdBQTZCO29CQUNqQ0MsU0FBUztvQkFDVEosT0FBTzt3QkFDTFA7d0JBQ0FGO3dCQUNBYyxTQUFTQyxLQUF5QixJQUFpQk4saUJBQWlCWCxRQUFRVyxNQUFNTyxLQUFLLEdBQUdDO29CQUM1RjtvQkFDQUMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQztnQkFFQVosSUFBSWEsTUFBTSxDQUFDcEIsWUFBWXFCLElBQUksQ0FBQ1Y7WUFDOUI7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vbGliL2FwaS9taWRkbGV3YXJlL2Vycm9yLWhhbmRsZXIudHM/Njg4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlLCBOZXh0QXBpSGFuZGxlciB9IGZyb20gJ25leHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlFcnJvclJlc3BvbnNlIHtcclxuICBzdWNjZXNzOiBmYWxzZTtcclxuICBlcnJvcjoge1xyXG4gICAgY29kZTogc3RyaW5nO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgZGV0YWlscz86IHVua25vd247XHJcbiAgfTtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMTtcclxuICBjb2RlID0gJ0FVVEhFTlRJQ0FUSU9OX0VSUk9SJztcclxuICBcclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgPSAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdBdXRoZW50aWNhdGlvbkVycm9yJztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgc3RhdHVzQ29kZSA9IDQwMDtcclxuICBjb2RlID0gJ1ZBTElEQVRJT05fRVJST1InO1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZyA9ICdJbnZhbGlkIGlucHV0IGRhdGEnKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9ICdWYWxpZGF0aW9uRXJyb3InO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhFcnJvckhhbmRsZXIoaGFuZGxlcjogTmV4dEFwaUhhbmRsZXIpIHtcclxuICByZXR1cm4gYXN5bmMgKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvcjonLCBlcnJvcik7XHJcblxyXG4gICAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnc3RhdHVzQ29kZScgaW4gZXJyb3IgPyAoZXJyb3Iuc3RhdHVzQ29kZSBhcyBudW1iZXIpIDogNTAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcclxuICAgICAgICAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IgPyAoZXJyb3IgYXMgeyBtZXNzYWdlOiBzdHJpbmcgfSkubWVzc2FnZSA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InKTtcclxuICAgICAgY29uc3QgY29kZSA9IGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ2NvZGUnIGluIGVycm9yID8gKGVycm9yLmNvZGUgYXMgc3RyaW5nKSA6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InO1xyXG5cclxuICAgICAgLy8gRW5zdXJlIHdlIGhhdmVuJ3QgYWxyZWFkeSBzZW50IGEgcmVzcG9uc2VcclxuICAgICAgaWYgKCFyZXMud3JpdGFibGVFbmRlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlFcnJvclJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgICBjb2RlLFxyXG4gICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5qc29uKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiLCJjb2RlIiwibmFtZSIsIlZhbGlkYXRpb25FcnJvciIsIndpdGhFcnJvckhhbmRsZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiZXJyb3IiLCJjb25zb2xlIiwid3JpdGFibGVFbmRlZCIsInJlc3BvbnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJwcm9jZXNzIiwic3RhY2siLCJ1bmRlZmluZWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/api/middleware/error-handler.ts\n");

/***/ }),

/***/ "(api)/./lib/database-server.ts":
/*!********************************!*\
  !*** ./lib/database-server.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = \"https://hewrjnconmykfzggwhzg.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n}\nif (!supabaseServiceKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY environment variable\");\n}\n// Create a Supabase client with the service role key for admin operations\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxxQkFBcUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0FBRWhFLElBQUksQ0FBQ0wsYUFBYTtJQUNoQixNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxJQUFJLENBQUNGLG9CQUFvQjtJQUN2QixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSwwRUFBMEU7QUFDbkUsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FBQ0MsYUFBYUksb0JBQW9CO0lBQ3pFSSxNQUFNO1FBQ0pDLGtCQUFrQjtRQUNsQkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvaWNlLW9mLXVwc2EvLi9saWIvZGF0YWJhc2Utc2VydmVyLnRzP2NkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xyXG5cclxuaWYgKCFzdXBhYmFzZVVybCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcclxufVxyXG5cclxuaWYgKCFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSBlbnZpcm9ubWVudCB2YXJpYWJsZScpO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgd2l0aCB0aGUgc2VydmljZSByb2xlIGtleSBmb3IgYWRtaW4gb3BlcmF0aW9uc1xyXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5LCB7XHJcbiAgYXV0aDoge1xyXG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcclxuICB9XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/database-server.ts\n");

/***/ }),

/***/ "(api)/./pages/api/admin/dashboard-stats.ts":
/*!********************************************!*\
  !*** ./pages/api/admin/dashboard-stats.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_database_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/database-server */ \"(api)/./lib/database-server.ts\");\n/* harmony import */ var _lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api/middleware/error-handler */ \"(api)/./lib/api/middleware/error-handler.ts\");\n/* harmony import */ var _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/api/middleware/auth */ \"(api)/./lib/api/middleware/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_database_server__WEBPACK_IMPORTED_MODULE_0__, _lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// Rate limiting: 20 requests per minute per admin\nconst rateLimitMiddleware = (0,_lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.withRateLimit)(20, 60 * 1000, (req)=>{\n    const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n    return token || req.socket.remoteAddress || \"unknown\";\n});\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            success: false,\n            error: {\n                code: \"METHOD_NOT_ALLOWED\",\n                message: \"Only GET method is allowed\",\n                details: null\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n    try {\n        // Apply rate limiting\n        rateLimitMiddleware(req);\n        // Authenticate user\n        const user = await (0,_lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.authenticate)(req);\n        // Authorize admin access\n        if (!(0,_lib_api_middleware_auth__WEBPACK_IMPORTED_MODULE_2__.checkRole)(user.role, [\n            \"admin\"\n        ])) {\n            return res.status(403).json({\n                success: false,\n                error: {\n                    code: \"FORBIDDEN\",\n                    message: \"Admin access required\",\n                    details: null\n                },\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Log admin dashboard access\n        console.info(`Admin dashboard accessed by user: ${user.id}`, {\n            timestamp: new Date().toISOString(),\n            email: user.email\n        });\n        // Get total users\n        const { count: totalUsers } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        // Get total articles\n        const { count: totalArticles } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        // Get draft articles count\n        const { count: draftArticles } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"status\", \"draft\");\n        // Get published articles count\n        const { count: publishedArticles } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        }).eq(\"status\", \"published\");\n        // Get total comments\n        let totalComments = 0;\n        try {\n            const { count } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"comments\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            });\n            totalComments = count || 0;\n        } catch  {\n        // Comments table might not exist yet\n        }\n        // Get total views using SQL aggregation for better performance\n        let totalViews = 0;\n        try {\n            // Use SQL aggregation instead of JavaScript reduce for better performance\n            const { data: viewsResult } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"views_count\").not(\"views_count\", \"is\", null);\n            totalViews = viewsResult?.reduce((sum, article)=>sum + (article.views_count || 0), 0) || 0;\n        } catch  {\n        // If articles table doesn't exist, views will be 0\n        }\n        // Get recent activity\n        const recentActivity = [];\n        // Recent articles\n        const { data: recentArticles } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"title, published_at\").order(\"published_at\", {\n            ascending: false\n        }).limit(3);\n        recentArticles?.forEach((article)=>{\n            recentActivity.push({\n                type: \"article\",\n                title: `New article: ${article.title}`,\n                date: article.published_at || new Date().toISOString(),\n                timestamp: article.published_at\n            });\n        });\n        // Recent users\n        const { data: recentUsers } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"name, created_at\").order(\"created_at\", {\n            ascending: false\n        }).limit(2);\n        recentUsers?.forEach((user)=>{\n            recentActivity.push({\n                type: \"user\",\n                title: `New user: ${user.name}`,\n                date: user.created_at || new Date().toISOString(),\n                timestamp: user.created_at\n            });\n        });\n        // Sort recent activity by timestamp\n        recentActivity.sort((a, b)=>new Date(b.timestamp || 0).getTime() - new Date(a.timestamp || 0).getTime());\n        // Get monthly stats (last 6 months)\n        const monthlyStats = [];\n        const currentDate = new Date();\n        for(let i = 0; i < 6; i++){\n            const date = new Date(currentDate.getFullYear(), currentDate.getMonth() - i, 1);\n            const monthName = date.toLocaleDateString(\"en-US\", {\n                month: \"long\",\n                year: \"numeric\"\n            });\n            const startOfMonth = new Date(date.getFullYear(), date.getMonth(), 1).toISOString();\n            const endOfMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0).toISOString();\n            // Get users created in this month\n            const { count: monthUsers } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).gte(\"created_at\", startOfMonth).lt(\"created_at\", endOfMonth);\n            // Get articles published in this month\n            const { count: monthArticles } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).gte(\"published_at\", startOfMonth).lt(\"published_at\", endOfMonth);\n            // Get views for articles in this month\n            const { data: monthArticlesData } = await _lib_database_server__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"articles\").select(\"views_count\").gte(\"published_at\", startOfMonth).lt(\"published_at\", endOfMonth);\n            const monthViews = monthArticlesData?.reduce((sum, article)=>sum + (article.views_count || 0), 0) || 0;\n            monthlyStats.push({\n                month: monthName,\n                users: monthUsers || 0,\n                articles: monthArticles || 0,\n                views: monthViews\n            });\n        }\n        monthlyStats.reverse(); // Show oldest to newest\n        res.status(200).json({\n            success: true,\n            data: {\n                totalUsers: totalUsers || 0,\n                totalArticles: totalArticles || 0,\n                draftArticles: draftArticles || 0,\n                publishedArticles: publishedArticles || 0,\n                totalComments,\n                totalViews,\n                recentActivity,\n                monthlyStats\n            },\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Admin dashboard stats error:\", error);\n        res.status(500).json({\n            success: false,\n            error: {\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"An unexpected error occurred while fetching dashboard stats\",\n                details:  true ? error.message : 0\n            },\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n// Wrap with error handler middleware\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_lib_api_middleware_error_handler__WEBPACK_IMPORTED_MODULE_1__.withErrorHandler)(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vZGFzaGJvYXJkLXN0YXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDc0Q7QUFDZ0I7QUFDRjtBQUNWO0FBUzFELGtEQUFrRDtBQUNsRCxNQUFNSyxzQkFBc0JELHVFQUFhQSxDQUFDLElBQUksS0FBSyxNQUFNLENBQUNFO0lBQ3hELE1BQU1DLFFBQVFELElBQUlFLE9BQU8sQ0FBQ0MsYUFBYSxFQUFFQyxRQUFRLFdBQVc7SUFDNUQsT0FBT0gsU0FBU0QsSUFBSUssTUFBTSxDQUFDQyxhQUFhLElBQUk7QUFDOUM7QUFFQSxlQUFlQyxRQUFRUCxHQUFtQixFQUFFUSxHQUFvQjtJQUM5RCxJQUFJUixJQUFJUyxNQUFNLEtBQUssT0FBTztRQUN4QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFNBQVM7WUFDWDtZQUNBQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7UUFDbkM7SUFDRjtJQUVBLElBQUk7UUFDRixzQkFBc0I7UUFDdEJwQixvQkFBb0JDO1FBRXBCLG9CQUFvQjtRQUNwQixNQUFNb0IsT0FBTyxNQUFNeEIsc0VBQVlBLENBQUNJO1FBRWhDLHlCQUF5QjtRQUN6QixJQUFJLENBQUNILG1FQUFTQSxDQUFDdUIsS0FBS0MsSUFBSSxFQUFFO1lBQUM7U0FBUSxHQUFHO1lBQ3BDLE9BQU9iLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUQyxPQUFPO29CQUNMQyxNQUFNO29CQUNOQyxTQUFTO29CQUNUQyxTQUFTO2dCQUNYO2dCQUNBQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLDZCQUE2QjtRQUM3QkcsUUFBUUMsSUFBSSxDQUFDLENBQUMsa0NBQWtDLEVBQUVILEtBQUtJLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDM0RQLFdB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QUFDckMsaUVBQWV4QixtRkFBZ0JBLENBQUNZLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2ljZS1vZi11cHNhLy4vcGFnZXMvYXBpL2FkbWluL2Rhc2hib2FyZC1zdGF0cy50cz83ZTIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL2RhdGFiYXNlLXNlcnZlcic7XHJcbmltcG9ydCB7IHdpdGhFcnJvckhhbmRsZXIgfSBmcm9tICdAL2xpYi9hcGkvbWlkZGxld2FyZS9lcnJvci1oYW5kbGVyJztcclxuaW1wb3J0IHsgYXV0aGVudGljYXRlLCBjaGVja1JvbGUgfSBmcm9tICdAL2xpYi9hcGkvbWlkZGxld2FyZS9hdXRoJztcclxuaW1wb3J0IHsgd2l0aFJhdGVMaW1pdCB9IGZyb20gJ0AvbGliL2FwaS9taWRkbGV3YXJlL2F1dGgnO1xyXG5cclxuaW50ZXJmYWNlIEFjdGl2aXR5SXRlbSB7XHJcbiAgdHlwZTogJ2FydGljbGUnIHwgJ3VzZXInIHwgJ2NvbW1lbnQnO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcD86IHN0cmluZztcclxufVxyXG5cclxuLy8gUmF0ZSBsaW1pdGluZzogMjAgcmVxdWVzdHMgcGVyIG1pbnV0ZSBwZXIgYWRtaW5cclxuY29uc3QgcmF0ZUxpbWl0TWlkZGxld2FyZSA9IHdpdGhSYXRlTGltaXQoMjAsIDYwICogMTAwMCwgKHJlcSkgPT4ge1xyXG4gIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuICByZXR1cm4gdG9rZW4gfHwgcmVxLnNvY2tldC5yZW1vdGVBZGRyZXNzIHx8ICd1bmtub3duJztcclxufSk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IHtcclxuICAgICAgICBjb2RlOiAnTUVUSE9EX05PVF9BTExPV0VEJyxcclxuICAgICAgICBtZXNzYWdlOiAnT25seSBHRVQgbWV0aG9kIGlzIGFsbG93ZWQnLFxyXG4gICAgICAgIGRldGFpbHM6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEFwcGx5IHJhdGUgbGltaXRpbmdcclxuICAgIHJhdGVMaW1pdE1pZGRsZXdhcmUocmVxKTtcclxuXHJcbiAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGF1dGhlbnRpY2F0ZShyZXEpO1xyXG5cclxuICAgIC8vIEF1dGhvcml6ZSBhZG1pbiBhY2Nlc3NcclxuICAgIGlmICghY2hlY2tSb2xlKHVzZXIucm9sZSwgWydhZG1pbiddKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICBjb2RlOiAnRk9SQklEREVOJyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnLFxyXG4gICAgICAgICAgZGV0YWlsczogbnVsbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9nIGFkbWluIGRhc2hib2FyZCBhY2Nlc3NcclxuICAgIGNvbnNvbGUuaW5mbyhgQWRtaW4gZGFzaGJvYXJkIGFjY2Vzc2VkIGJ5IHVzZXI6ICR7dXNlci5pZH1gLCB7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBlbWFpbDogdXNlci5lbWFpbFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR2V0IHRvdGFsIHVzZXJzXHJcbiAgICBjb25zdCB7IGNvdW50OiB0b3RhbFVzZXJzIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xyXG5cclxuICAgIC8vIEdldCB0b3RhbCBhcnRpY2xlc1xyXG4gICAgY29uc3QgeyBjb3VudDogdG90YWxBcnRpY2xlcyB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnYXJ0aWNsZXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcclxuXHJcbiAgICAvLyBHZXQgZHJhZnQgYXJ0aWNsZXMgY291bnRcclxuICAgIGNvbnN0IHsgY291bnQ6IGRyYWZ0QXJ0aWNsZXMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ2FydGljbGVzJylcclxuICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcclxuICAgICAgLmVxKCdzdGF0dXMnLCAnZHJhZnQnKTtcclxuXHJcbiAgICAvLyBHZXQgcHVibGlzaGVkIGFydGljbGVzIGNvdW50XHJcbiAgICBjb25zdCB7IGNvdW50OiBwdWJsaXNoZWRBcnRpY2xlcyB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxyXG4gICAgICAuZnJvbSgnYXJ0aWNsZXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAuZXEoJ3N0YXR1cycsICdwdWJsaXNoZWQnKTtcclxuXHJcbiAgICAvLyBHZXQgdG90YWwgY29tbWVudHNcclxuICAgIGxldCB0b3RhbENvbW1lbnRzID0gMDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgY291bnQgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnY29tbWVudHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xyXG4gICAgICB0b3RhbENvbW1lbnRzID0gY291bnQgfHwgMDtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBDb21tZW50cyB0YWJsZSBtaWdodCBub3QgZXhpc3QgeWV0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRvdGFsIHZpZXdzIHVzaW5nIFNRTCBhZ2dyZWdhdGlvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXHJcbiAgICBsZXQgdG90YWxWaWV3cyA9IDA7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBVc2UgU1FMIGFnZ3JlZ2F0aW9uIGluc3RlYWQgb2YgSmF2YVNjcmlwdCByZWR1Y2UgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxyXG4gICAgICBjb25zdCB7IGRhdGE6IHZpZXdzUmVzdWx0IH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcclxuICAgICAgICAuc2VsZWN0KCd2aWV3c19jb3VudCcpXHJcbiAgICAgICAgLm5vdCgndmlld3NfY291bnQnLCAnaXMnLCBudWxsKTtcclxuICAgICAgXHJcbiAgICAgIHRvdGFsVmlld3MgPSB2aWV3c1Jlc3VsdD8ucmVkdWNlKChzdW0sIGFydGljbGUpID0+IHN1bSArIChhcnRpY2xlLnZpZXdzX2NvdW50IHx8IDApLCAwKSB8fCAwO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIC8vIElmIGFydGljbGVzIHRhYmxlIGRvZXNuJ3QgZXhpc3QsIHZpZXdzIHdpbGwgYmUgMFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCByZWNlbnQgYWN0aXZpdHlcclxuICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5OiBBY3Rpdml0eUl0ZW1bXSA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBSZWNlbnQgYXJ0aWNsZXNcclxuICAgIGNvbnN0IHsgZGF0YTogcmVjZW50QXJ0aWNsZXMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgLmZyb20oJ2FydGljbGVzJylcclxuICAgICAgLnNlbGVjdCgndGl0bGUsIHB1Ymxpc2hlZF9hdCcpXHJcbiAgICAgIC5vcmRlcigncHVibGlzaGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgIC5saW1pdCgzKTtcclxuXHJcbiAgICByZWNlbnRBcnRpY2xlcz8uZm9yRWFjaChhcnRpY2xlID0+IHtcclxuICAgICAgcmVjZW50QWN0aXZpdHkucHVzaCh7XHJcbiAgICAgICAgdHlwZTogJ2FydGljbGUnLFxyXG4gICAgICAgIHRpdGxlOiBgTmV3IGFydGljbGU6ICR7YXJ0aWNsZS50aXRsZX1gLFxyXG4gICAgICAgIGRhdGU6IGFydGljbGUucHVibGlzaGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB0aW1lc3RhbXA6IGFydGljbGUucHVibGlzaGVkX2F0XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUmVjZW50IHVzZXJzXHJcbiAgICBjb25zdCB7IGRhdGE6IHJlY2VudFVzZXJzIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgIC5zZWxlY3QoJ25hbWUsIGNyZWF0ZWRfYXQnKVxyXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgICAgLmxpbWl0KDIpO1xyXG5cclxuICAgIHJlY2VudFVzZXJzPy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICByZWNlbnRBY3Rpdml0eS5wdXNoKHtcclxuICAgICAgICB0eXBlOiAndXNlcicsXHJcbiAgICAgICAgdGl0bGU6IGBOZXcgdXNlcjogJHt1c2VyLm5hbWV9YCxcclxuICAgICAgICBkYXRlOiB1c2VyLmNyZWF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHRpbWVzdGFtcDogdXNlci5jcmVhdGVkX2F0XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU29ydCByZWNlbnQgYWN0aXZpdHkgYnkgdGltZXN0YW1wXHJcbiAgICByZWNlbnRBY3Rpdml0eS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCB8fCAwKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnRpbWVzdGFtcCB8fCAwKS5nZXRUaW1lKCkpO1xyXG5cclxuICAgIC8vIEdldCBtb250aGx5IHN0YXRzIChsYXN0IDYgbW9udGhzKVxyXG4gICAgY29uc3QgbW9udGhseVN0YXRzID0gW107XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpLCBjdXJyZW50RGF0ZS5nZXRNb250aCgpIC0gaSwgMSk7XHJcbiAgICAgIGNvbnN0IG1vbnRoTmFtZSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgbW9udGg6ICdsb25nJywgeWVhcjogJ251bWVyaWMnIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnRPZk1vbnRoID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIDEpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgIGNvbnN0IGVuZE9mTW9udGggPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIDApLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgdXNlcnMgY3JlYXRlZCBpbiB0aGlzIG1vbnRoXHJcbiAgICAgIGNvbnN0IHsgY291bnQ6IG1vbnRoVXNlcnMgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXHJcbiAgICAgICAgLmd0ZSgnY3JlYXRlZF9hdCcsIHN0YXJ0T2ZNb250aClcclxuICAgICAgICAubHQoJ2NyZWF0ZWRfYXQnLCBlbmRPZk1vbnRoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBhcnRpY2xlcyBwdWJsaXNoZWQgaW4gdGhpcyBtb250aFxyXG4gICAgICBjb25zdCB7IGNvdW50OiBtb250aEFydGljbGVzIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgLmZyb20oJ2FydGljbGVzJylcclxuICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxyXG4gICAgICAgIC5ndGUoJ3B1Ymxpc2hlZF9hdCcsIHN0YXJ0T2ZNb250aClcclxuICAgICAgICAubHQoJ3B1Ymxpc2hlZF9hdCcsIGVuZE9mTW9udGgpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IHZpZXdzIGZvciBhcnRpY2xlcyBpbiB0aGlzIG1vbnRoXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogbW9udGhBcnRpY2xlc0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAuZnJvbSgnYXJ0aWNsZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ3ZpZXdzX2NvdW50JylcclxuICAgICAgICAuZ3RlKCdwdWJsaXNoZWRfYXQnLCBzdGFydE9mTW9udGgpXHJcbiAgICAgICAgLmx0KCdwdWJsaXNoZWRfYXQnLCBlbmRPZk1vbnRoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG1vbnRoVmlld3MgPSBtb250aEFydGljbGVzRGF0YT8ucmVkdWNlKChzdW0sIGFydGljbGUpID0+IHN1bSArIChhcnRpY2xlLnZpZXdzX2NvdW50IHx8IDApLCAwKSB8fCAwO1xyXG4gICAgICBcclxuICAgICAgbW9udGhseVN0YXRzLnB1c2goe1xyXG4gICAgICAgIG1vbnRoOiBtb250aE5hbWUsXHJcbiAgICAgICAgdXNlcnM6IG1vbnRoVXNlcnMgfHwgMCxcclxuICAgICAgICBhcnRpY2xlczogbW9udGhBcnRpY2xlcyB8fCAwLFxyXG4gICAgICAgIHZpZXdzOiBtb250aFZpZXdzXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1vbnRobHlTdGF0cy5yZXZlcnNlKCk7IC8vIFNob3cgb2xkZXN0IHRvIG5ld2VzdFxyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIHRvdGFsVXNlcnM6IHRvdGFsVXNlcnMgfHwgMCxcclxuICAgICAgICB0b3RhbEFydGljbGVzOiB0b3RhbEFydGljbGVzIHx8IDAsXHJcbiAgICAgICAgZHJhZnRBcnRpY2xlczogZHJhZnRBcnRpY2xlcyB8fCAwLFxyXG4gICAgICAgIHB1Ymxpc2hlZEFydGljbGVzOiBwdWJsaXNoZWRBcnRpY2xlcyB8fCAwLFxyXG4gICAgICAgIHRvdGFsQ29tbWVudHMsXHJcbiAgICAgICAgdG90YWxWaWV3cyxcclxuICAgICAgICByZWNlbnRBY3Rpdml0eSxcclxuICAgICAgICBtb250aGx5U3RhdHNcclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQWRtaW4gZGFzaGJvYXJkIHN0YXRzIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgZGFzaGJvYXJkIHN0YXRzJyxcclxuICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSA6IG51bGxcclxuICAgICAgfSxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gV3JhcCB3aXRoIGVycm9yIGhhbmRsZXIgbWlkZGxld2FyZVxyXG5leHBvcnQgZGVmYXVsdCB3aXRoRXJyb3JIYW5kbGVyKGhhbmRsZXIpO1xyXG5cclxuIl0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJ3aXRoRXJyb3JIYW5kbGVyIiwiYXV0aGVudGljYXRlIiwiY2hlY2tSb2xlIiwid2l0aFJhdGVMaW1pdCIsInJhdGVMaW1pdE1pZGRsZXdhcmUiLCJyZXEiLCJ0b2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicmVwbGFjZSIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJoYW5kbGVyIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVzZXIiLCJyb2xlIiwiY29uc29sZSIsImluZm8iLCJpZCIsImVtYWlsIiwiY291bnQiLCJ0b3RhbFVzZXJzIiwiZnJvbSIsInNlbGVjdCIsImhlYWQiLCJ0b3RhbEFydGljbGVzIiwiZHJhZnRBcnRpY2xlcyIsImVxIiwicHVibGlzaGVkQXJ0aWNsZXMiLCJ0b3RhbENvbW1lbnRzIiwidG90YWxWaWV3cyIsImRhdGEiLCJ2aWV3c1Jlc3VsdCIsIm5vdCIsInJlZHVjZSIsInN1bSIsImFydGljbGUiLCJ2aWV3c19jb3VudCIsInJlY2VudEFjdGl2aXR5IiwicmVjZW50QXJ0aWNsZXMiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwiZm9yRWFjaCIsInB1c2giLCJ0eXBlIiwidGl0bGUiLCJkYXRlIiwicHVibGlzaGVkX2F0IiwicmVjZW50VXNlcnMiLCJuYW1lIiwiY3JlYXRlZF9hdCIsInNvcnQiLCJhIiwiYiIsImdldFRpbWUiLCJtb250aGx5U3RhdHMiLCJjdXJyZW50RGF0ZSIsImkiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwibW9udGhOYW1lIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibW9udGgiLCJ5ZWFyIiwic3RhcnRPZk1vbnRoIiwiZW5kT2ZNb250aCIsIm1vbnRoVXNlcnMiLCJndGUiLCJsdCIsIm1vbnRoQXJ0aWNsZXMiLCJtb250aEFydGljbGVzRGF0YSIsIm1vbnRoVmlld3MiLCJ1c2VycyIsImFydGljbGVzIiwidmlld3MiLCJyZXZlcnNlIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/dashboard-stats.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8"], () => (__webpack_exec__("(api)/../../node_modules/.pnpm/next@14.2.33_@babel+core@7._c7975f2ee2cecff60ee055e1f1f303a8/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fdashboard-stats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cdashboard-stats.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();